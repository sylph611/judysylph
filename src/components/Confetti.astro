---
// Confetti animation component - automatically triggers on mount
---

<div id="confetti-container" class="fixed inset-0 pointer-events-none z-50 overflow-hidden"></div>

<script>
  function createConfetti() {
    const container = document.getElementById('confetti-container');
    if (!container) return;

    const colors = ['#7c3aed', '#ec4899', '#f59e0b', '#10b981', '#3b82f6', '#ef4444'];
    const confettiCount = 100;

    for (let i = 0; i < confettiCount; i++) {
      const confetti = document.createElement('div');
      confetti.className = 'confetti-piece';

      const color = colors[Math.floor(Math.random() * colors.length)];
      const left = Math.random() * 100;
      const animationDuration = 3 + Math.random() * 2;
      const animationDelay = Math.random() * 0.5;
      const size = 8 + Math.random() * 8;
      const rotation = Math.random() * 360;

      confetti.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        background: ${color};
        left: ${left}%;
        top: -20px;
        opacity: 1;
        transform: rotate(${rotation}deg);
        animation: confetti-fall ${animationDuration}s ease-out ${animationDelay}s forwards;
        border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};
      `;

      container.appendChild(confetti);
    }

    // Clean up after animation
    setTimeout(() => {
      container.innerHTML = '';
    }, 6000);
  }

  // Trigger confetti on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', createConfetti);
  } else {
    createConfetti();
  }
</script>

<style is:global>
  @keyframes confetti-fall {
    0% {
      transform: translateY(0) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(720deg);
      opacity: 0;
    }
  }

  .confetti-piece {
    will-change: transform, opacity;
  }
</style>
