---
import Layout from '../layouts/Layout.astro';

// Try to detect language from referrer or default to Korean
const referrer = Astro.request.headers.get('referer') || '';
const lang = referrer.includes('/en/') || referrer.includes('/en') ? 'en' : 'ko';

const t = {
  title: lang === 'ko' ? 'í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' : 'Page Not Found',
  description: lang === 'ko' ? 'ìš”ì²­í•˜ì‹  í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' : 'The page you requested could not be found.',
  message: lang === 'ko' ? 'ìš”ì²­í•˜ì‹  í˜ì´ì§€ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì´ë™ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' : 'The page you are looking for might have been removed or moved.',
  home: lang === 'ko' ? 'í™ˆìœ¼ë¡œ ê°€ê¸°' : 'Go Home',
  tools: lang === 'ko' ? 'ë„êµ¬ ë³´ê¸°' : 'View Tools',
  popularTests: lang === 'ko' ? 'ì¸ê¸° í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì„¸ìš”' : 'Try Popular Tests',
  switchLang: lang === 'ko' ? 'Switch to English' : 'í•œêµ­ì–´ë¡œ ë³´ê¸°'
};

const popularTests = lang === 'ko' ? [
  { href: '/ko/test/mbti', emoji: 'ğŸ§ ', name: 'MBTI í…ŒìŠ¤íŠ¸' },
  { href: '/ko/test/animal', emoji: 'ğŸ¾', name: 'ë™ë¬¼ í…ŒìŠ¤íŠ¸' },
  { href: '/ko/test/love-language', emoji: 'ğŸ’•', name: 'ì‚¬ë‘ì˜ ì–¸ì–´' },
  { href: '/ko/test/travel', emoji: 'âœˆï¸', name: 'ì—¬í–‰ì§€ í…ŒìŠ¤íŠ¸' }
] : [
  { href: '/en/test/mbti', emoji: 'ğŸ§ ', name: 'MBTI Test' },
  { href: '/en/test/animal', emoji: 'ğŸ¾', name: 'Animal Test' },
  { href: '/en/test/love-language', emoji: 'ğŸ’•', name: 'Love Language' },
  { href: '/en/test/travel', emoji: 'âœˆï¸', name: 'Travel Test' }
];
---

<Layout title={`${t.title} | JudySylph`} description={t.description}>
  <div class="max-w-2xl mx-auto px-4 py-16 text-center">
    <!-- 404 Illustration -->
    <div class="text-9xl mb-8">ğŸ”</div>

    <h1 class="text-6xl font-bold text-gray-900 dark:text-white mb-4">404</h1>

    <p class="text-2xl text-gray-600 dark:text-gray-400 mb-8">
      {t.title}
    </p>

    <p class="text-gray-500 dark:text-gray-500 mb-8">
      {t.message}
    </p>

    <!-- Quick Actions -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
      <a
        href={`/${lang}`}
        class="px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors"
      >
        ğŸ  {t.home}
      </a>
      <a
        href={`/${lang}/tools`}
        class="px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
      >
        ğŸ”§ {t.tools}
      </a>
    </div>

    <!-- Popular Tests -->
    <div class="bg-gray-50 dark:bg-gray-800 rounded-2xl p-6">
      <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">
        {t.popularTests}
      </h2>
      <div class="flex flex-wrap justify-center gap-3">
        {popularTests.map(test => (
          <a href={test.href} class="px-4 py-2 bg-white dark:bg-gray-700 rounded-full text-sm hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
            {test.emoji} {test.name}
          </a>
        ))}
      </div>
    </div>

    <!-- Language Switch -->
    <div class="mt-8 text-sm text-gray-500 dark:text-gray-400">
      <a href={lang === 'ko' ? '/en' : '/ko'} class="hover:text-primary-600 dark:hover:text-primary-400">
        {t.switchLang} â†’
      </a>
    </div>
  </div>
</Layout>
