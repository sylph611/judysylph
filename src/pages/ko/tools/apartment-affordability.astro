---
import Layout from '../../../layouts/Layout.astro';
import { getTool } from '../../../utils/tools';

const lang = 'ko';
const tool = getTool('apartment-affordability', lang);
---

<Layout title={`${tool?.title} | JudySylph`} description={tool?.description}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <div class="text-5xl mb-4">{tool?.emoji}</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">{tool?.title}</h1>
      <p class="text-gray-600 dark:text-gray-400">{tool?.description}</p>
      <p class="text-sm text-primary-600 dark:text-primary-400 mt-2">2026ë…„ ì„œìš¸/ìˆ˜ë„ê¶Œ ì‹œì„¸ ê¸°ì¤€</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
      <form id="calc-form" class="space-y-6">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì—°ë´‰ (ì„¸ì „)</label>
            <input type="text" id="salary" placeholder="6,000" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
            <p class="text-xs text-gray-500 mt-1">ë§Œì› ë‹¨ìœ„</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">í˜„ì¬ ìì‚°</label>
            <input type="text" id="assets" placeholder="20,000" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
            <p class="text-xs text-gray-500 mt-1">ë§Œì› ë‹¨ìœ„ (ì €ì¶•+ì „ì„¸ê¸ˆ ë“±)</p>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ëŒ€ì¶œ ì˜í–¥</label>
          <select id="loanWilling" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
            <option value="0">ëŒ€ì¶œ ì—†ì´ êµ¬ë§¤</option>
            <option value="40">DSR 40% ì´ë‚´ ëŒ€ì¶œ</option>
            <option value="60" selected>DSR 60% ì´ë‚´ ëŒ€ì¶œ (ì¼ë°˜ì )</option>
            <option value="80">ìµœëŒ€í•œ ëŒ€ì¶œ í™œìš©</option>
          </select>
        </div>
        <button type="submit" class="w-full px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700">ë‚´ ì•„íŒŒíŠ¸ ì•Œì•„ë³´ê¸°</button>
      </form>

      <div id="result-area" class="mt-8 hidden">
        <div id="result-header" class="bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white text-center mb-6">
          <div class="text-lg opacity-90 mb-2">ë‹¹ì‹ ì´ êµ¬ë§¤ ê°€ëŠ¥í•œ ì•„íŒŒíŠ¸</div>
          <div id="apt-size" class="text-4xl font-bold mb-2">-</div>
          <div id="apt-price" class="text-xl opacity-90">-</div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6">
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 text-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">ì˜ˆìƒ ëŒ€ì¶œê¸ˆ</div>
            <div id="r-loan" class="text-xl font-bold text-primary-600 dark:text-primary-400">-</div>
          </div>
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 text-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">ì›” ìƒí™˜ê¸ˆ</div>
            <div id="r-monthly" class="text-xl font-bold text-red-500">-</div>
          </div>
        </div>

        <div id="region-analysis" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-4">êµ¬ë§¤ ê°€ëŠ¥ ì§€ì—­ ë¶„ì„</h3>
          <div id="regions" class="space-y-3"></div>
        </div>

        <div id="advice-box" class="rounded-xl p-5 mb-6">
          <h3 class="font-bold mb-2">ğŸ’¡ ë§ì¶¤ ì¡°ì–¸</h3>
          <p id="advice-text" class="text-sm"></p>
        </div>

        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
          <h3 class="font-bold text-gray-900 dark:text-white mb-3">ğŸ“Š ì¬ì • ìš”ì•½</h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ êµ¬ë§¤ ê°€ëŠ¥ì•¡</span><span id="r-total" class="font-medium">-</span></div>
            <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ìê¸°ìë³¸</span><span id="r-equity" class="font-medium">-</span></div>
            <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ëŒ€ì¶œ ë¹„ìœ¨ (LTV)</span><span id="r-ltv" class="font-medium">-</span></div>
          </div>
        </div>

        <!-- SEO í•´ì„ ì½˜í…ì¸  -->
        <div id="seo-content" class="mt-8 space-y-6">
          <h2 id="seo-summary" class="text-2xl font-bold text-gray-900 dark:text-white"></h2>

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ“Œ ì´ ê²°ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ</h3>
            <p id="seo-meaning" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <!-- ê´‘ê³  ì‚½ì… ì˜ì—­ -->
          <!-- AD_SLOT: middle-content -->

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ‘¤ ì´ëŸ° ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤</h3>
            <p id="seo-suitable" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì </h3>
            <p id="seo-caution" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <!-- ê´‘ê³  ì‚½ì… ì˜ì—­ -->
          <!-- AD_SLOT: before-faq -->

          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
            <div id="faq-content" class="space-y-4"></div>
          </div>

          <div class="bg-primary-50 dark:bg-primary-900/20 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-3">ğŸ”— ê´€ë ¨ ê³„ì‚°ê¸°</h3>
            <div class="flex flex-wrap gap-2">
              <a href="/ko/tools/car-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸš— ë‚´ ì—°ë´‰ìœ¼ë¡œ ì‚´ ìˆ˜ ìˆëŠ” ì°¨</a>
              <a href="/ko/tools/salary-percentile" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ“Š ë‚´ ì—°ë´‰ ìˆœìœ„</a>
              <a href="/ko/tools/mortgage-calculator" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ¦ ì£¼íƒë‹´ë³´ëŒ€ì¶œ ê³„ì‚°ê¸°</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
      <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">2026ë…„ ì„œìš¸ ì•„íŒŒíŠ¸ ì‹œì„¸ (í‰ë‹¹)</h4>
      <div class="grid grid-cols-2 gap-2 text-sm text-blue-700 dark:text-blue-300">
        <p>â€¢ ê°•ë‚¨/ì„œì´ˆ: 8,000~15,000ë§Œì›</p>
        <p>â€¢ ìš©ì‚°/ì„±ë™: 5,000~8,000ë§Œì›</p>
        <p>â€¢ ë§ˆí¬/ì˜ë“±í¬: 4,000~6,000ë§Œì›</p>
        <p>â€¢ ë…¸ì›/ë„ë´‰: 2,500~3,500ë§Œì›</p>
      </div>
    </div>
    <div class="mt-8 text-center"><a href="/ko/tools" class="text-primary-600 dark:text-primary-400 hover:underline">â† ë„êµ¬ ëª©ë¡</a></div>
  </div>
</Layout>

<script>
  const form = document.getElementById('calc-form') as HTMLFormElement;
  const salaryInput = document.getElementById('salary') as HTMLInputElement;
  const assetsInput = document.getElementById('assets') as HTMLInputElement;

  [salaryInput, assetsInput].forEach(input => {
    input?.addEventListener('input', e => {
      const v = (e.target as HTMLInputElement).value.replace(/\D/g,'');
      (e.target as HTMLInputElement).value = Number(v).toLocaleString('ko-KR');
    });
  });

  // 2026ë…„ ì„œìš¸/ìˆ˜ë„ê¶Œ í‰ë‹¹ ì‹œì„¸ (ë§Œì›)
  const regions = [
    { name: 'ê°•ë‚¨/ì„œì´ˆ/ì†¡íŒŒ', pricePerPyeong: 10000, emoji: 'ğŸ™ï¸', tier: 'S' },
    { name: 'ìš©ì‚°/ì„±ë™/ê´‘ì§„', pricePerPyeong: 6500, emoji: 'ğŸŒ†', tier: 'A' },
    { name: 'ë§ˆí¬/ì˜ë“±í¬/ë™ì‘', pricePerPyeong: 5000, emoji: 'ğŸ¢', tier: 'A' },
    { name: 'ì„œëŒ€ë¬¸/ì€í‰/ì¤‘ë‘', pricePerPyeong: 3500, emoji: 'ğŸ˜ï¸', tier: 'B' },
    { name: 'ë…¸ì›/ë„ë´‰/ê°•ë¶', pricePerPyeong: 3000, emoji: 'ğŸ ', tier: 'B' },
    { name: 'ê²½ê¸° ë¶„ë‹¹/íŒêµ', pricePerPyeong: 5500, emoji: 'ğŸŒ³', tier: 'A' },
    { name: 'ê²½ê¸° ìˆ˜ì›/ìš©ì¸', pricePerPyeong: 2800, emoji: 'ğŸ¡', tier: 'B' },
    { name: 'ì¸ì²œ/ë¶€ì²œ', pricePerPyeong: 2200, emoji: 'ğŸŒŠ', tier: 'C' }
  ];

  form?.addEventListener('submit', e => {
    e.preventDefault();
    const salary = parseInt(salaryInput.value.replace(/,/g,'')) || 0;
    const assets = parseInt(assetsInput.value.replace(/,/g,'')) || 0;
    const dsrRate = parseInt((document.getElementById('loanWilling') as HTMLSelectElement).value) / 100;

    // ëŒ€ì¶œ ê°€ëŠ¥ì•¡ ê³„ì‚° (DSR ê¸°ì¤€, ì—°ì´ìœ¨ 5%, 30ë…„)
    const monthlyPaymentLimit = (salary * 10000 / 12) * dsrRate;
    const rate = 0.05 / 12;
    const months = 360;
    const maxLoan = dsrRate > 0 ? Math.round(monthlyPaymentLimit * (Math.pow(1+rate,months)-1) / (rate * Math.pow(1+rate,months))) : 0;

    const totalBudget = assets * 10000 + maxLoan;
    const totalBudgetMan = Math.round(totalBudget / 10000);

    // êµ¬ë§¤ ê°€ëŠ¥í•œ í‰ìˆ˜ ê³„ì‚° (ì„œìš¸ í‰ê·  í‰ë‹¹ 4500ë§Œì› ê¸°ì¤€)
    const avgPricePerPyeong = 4500;
    const affordablePyeong = Math.round(totalBudgetMan / avgPricePerPyeong);

    let sizeGrade, headerColor;
    if (affordablePyeong < 15) {
      sizeGrade = 'ì†Œí˜• (10~15í‰)';
      headerColor = 'from-gray-500 to-slate-600';
    } else if (affordablePyeong < 25) {
      sizeGrade = 'ì¤‘ì†Œí˜• (15~25í‰)';
      headerColor = 'from-blue-500 to-cyan-600';
    } else if (affordablePyeong < 35) {
      sizeGrade = 'ì¤‘í˜• (25~35í‰)';
      headerColor = 'from-emerald-500 to-teal-600';
    } else if (affordablePyeong < 45) {
      sizeGrade = 'ì¤‘ëŒ€í˜• (35~45í‰)';
      headerColor = 'from-purple-500 to-pink-600';
    } else {
      sizeGrade = 'ëŒ€í˜• (45í‰ ì´ìƒ)';
      headerColor = 'from-amber-500 to-orange-600';
    }

    document.getElementById('result-area')?.classList.remove('hidden');

    const header = document.getElementById('result-header')!;
    header.className = `bg-gradient-to-br ${headerColor} rounded-2xl p-6 text-white text-center mb-6`;

    document.getElementById('apt-size')!.textContent = sizeGrade;
    document.getElementById('apt-price')!.textContent = `ì˜ˆì‚° ì•½ ${totalBudgetMan.toLocaleString()}ë§Œì›`;

    document.getElementById('r-loan')!.textContent = Math.round(maxLoan/10000).toLocaleString() + 'ë§Œì›';
    const monthlyPayment = Math.round(monthlyPaymentLimit);
    document.getElementById('r-monthly')!.textContent = monthlyPayment.toLocaleString() + 'ì›';

    // ì§€ì—­ë³„ ë¶„ì„
    const regionsDiv = document.getElementById('regions')!;
    regionsDiv.innerHTML = regions.map(r => {
      const affordableSize = Math.round(totalBudgetMan / r.pricePerPyeong);
      const status = affordableSize >= 25 ? 'text-green-600' : affordableSize >= 15 ? 'text-yellow-600' : 'text-red-500';
      return `
        <div class="flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-600 rounded-lg">
          <span class="text-gray-700 dark:text-gray-300">${r.emoji} ${r.name}</span>
          <span class="${status} font-medium">${affordableSize}í‰</span>
        </div>
      `;
    }).join('');

    document.getElementById('r-total')!.textContent = totalBudgetMan.toLocaleString() + 'ë§Œì›';
    document.getElementById('r-equity')!.textContent = assets.toLocaleString() + 'ë§Œì›';
    const ltv = Math.round((maxLoan / totalBudget) * 100);
    document.getElementById('r-ltv')!.textContent = ltv + '%';

    // ì¡°ì–¸
    let advice, adviceBg;
    if (totalBudgetMan < 30000) {
      advice = 'í˜„ì¬ ìì‚°ìœ¼ë¡œëŠ” ì„œìš¸ ë‚´ êµ¬ë§¤ê°€ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²½ê¸°ë„ ì™¸ê³½ì´ë‚˜ ì „ì„¸ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”. ì²­ì•½ ë‹¹ì²¨ì„ ë…¸ë ¤ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ì „ëµì…ë‹ˆë‹¤.';
      adviceBg = 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200';
    } else if (totalBudgetMan < 60000) {
      advice = 'ì„œìš¸ ì™¸ê³½ì´ë‚˜ ê²½ê¸° ì£¼ìš” ì§€ì—­ì—ì„œ ì¤‘ì†Œí˜• ì•„íŒŒíŠ¸ êµ¬ë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. êµí†µê³¼ í•™êµ°ì„ ê³ ë ¤í•´ ì‹¤ê±°ì£¼ ìœ„ì£¼ë¡œ ì ‘ê·¼í•˜ì„¸ìš”.';
      adviceBg = 'bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200';
    } else if (totalBudgetMan < 100000) {
      advice = 'ì„œìš¸ ì£¼ìš” ì§€ì—­ì—ì„œ ì¤‘í˜• ì•„íŒŒíŠ¸ êµ¬ë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì‹ ì¶•ê³¼ êµ¬ì¶•ì˜ ê°€ê²© ì°¨ì´ë¥¼ ë¹„êµí•˜ê³ , ì¬ê±´ì¶• ì˜ˆì • ë‹¨ì§€ë„ ëˆˆì—¬ê²¨ë³´ì„¸ìš”.';
      adviceBg = 'bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200';
    } else {
      advice = 'ê°•ë‚¨ê¶Œì„ í¬í•¨í•œ ì„œìš¸ í•µì‹¬ ì§€ì—­ì—ì„œ ì„ íƒì˜ í­ì´ ë„“ìŠµë‹ˆë‹¤. ì¥ê¸°ì ì¸ ê°€ì¹˜ ìƒìŠ¹ì„ ê³ ë ¤í•´ ì…ì§€ë¥¼ ì‹ ì¤‘íˆ ì„ íƒí•˜ì„¸ìš”.';
      adviceBg = 'bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-200';
    }

    const adviceBox = document.getElementById('advice-box')!;
    adviceBox.className = `rounded-xl p-5 mb-6 ${adviceBg}`;
    document.getElementById('advice-text')!.textContent = advice;

    // SEO ì½˜í…ì¸  ë™ì  ìƒì„±
    generateSeoContent(salary, assets, totalBudgetMan, maxLoan, ltv, affordablePyeong, sizeGrade);
  });

  function generateSeoContent(salary: number, assets: number, totalBudget: number, maxLoan: number, ltv: number, pyeong: number, sizeGrade: string) {
    const loanMan = Math.round(maxLoan / 10000);

    // ê²°ê³¼ ìš”ì•½
    let summaryText, statusEmoji;
    if (totalBudget >= 100000) {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›, ìì‚° ${assets.toLocaleString()}ë§Œì›ìœ¼ë¡œ ì„œìš¸ í•µì‹¬ ì§€ì—­ ${sizeGrade} êµ¬ë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤`;
      statusEmoji = 'ğŸ†';
    } else if (totalBudget >= 60000) {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì› ê¸°ì¤€, ì„œìš¸ ì£¼ìš” ì§€ì—­ì—ì„œ ${sizeGrade} ì•„íŒŒíŠ¸ êµ¬ë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤`;
      statusEmoji = 'âœ…';
    } else if (totalBudget >= 30000) {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ìœ¼ë¡œ ì„œìš¸ ì™¸ê³½ ë˜ëŠ” ìˆ˜ë„ê¶Œì—ì„œ ${sizeGrade} ì•„íŒŒíŠ¸ë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤`;
      statusEmoji = 'ğŸ“Š';
    } else {
      summaryText = `í˜„ì¬ ì¡°ê±´ìœ¼ë¡œëŠ” ìˆ˜ë„ê¶Œ ì™¸ê³½ ì§€ì—­ì´ë‚˜ ì „ì„¸ë¥¼ ìš°ì„  ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤`;
      statusEmoji = 'ğŸ’¡';
    }
    document.getElementById('seo-summary')!.textContent = `${statusEmoji} ê²°ê³¼ ìš”ì•½: ${summaryText}`;

    // ì˜ë¯¸ ì„¤ëª…
    const meaningText = `ê·€í•˜ì˜ ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ê³¼ í˜„ì¬ ìì‚° ${assets.toLocaleString()}ë§Œì›ì„ ë°”íƒ•ìœ¼ë¡œ ë¶„ì„í•œ ê²°ê³¼, ` +
      `ì´ êµ¬ë§¤ ê°€ëŠ¥ ê¸ˆì•¡ì€ ì•½ ${totalBudget.toLocaleString()}ë§Œì›ì…ë‹ˆë‹¤. ì´ ì¤‘ ëŒ€ì¶œ ê°€ëŠ¥ ê¸ˆì•¡ì€ ${loanMan.toLocaleString()}ë§Œì›ì´ë©°, ` +
      `LTV(ë‹´ë³´ì¸ì •ë¹„ìœ¨)ëŠ” ${ltv}%ì…ë‹ˆë‹¤. 2026ë…„ ì„œìš¸ í‰ê·  í‰ë‹¹ ì‹œì„¸ 4,500ë§Œì›ì„ ê¸°ì¤€ìœ¼ë¡œ ì•½ ${pyeong}í‰(${Math.round(pyeong * 3.3)}ã¡) ê·œëª¨ì˜ ` +
      `ì•„íŒŒíŠ¸ë¥¼ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°•ë‚¨/ì„œì´ˆ/ì†¡íŒŒ ë“± í•µì‹¬ ì§€ì—­ì€ í‰ë‹¹ 1ì–µì› ì´ìƒì´ë¯€ë¡œ ê°™ì€ ì˜ˆì‚°ìœ¼ë¡œ ${Math.round(totalBudget / 10000)}í‰ ìˆ˜ì¤€ë§Œ ê°€ëŠ¥í•˜ë©°, ` +
      `ë…¸ì›/ë„ë´‰/ì¸ì²œ ë“± ì™¸ê³½ ì§€ì—­ì€ í‰ë‹¹ 2,500~3,000ë§Œì› ìˆ˜ì¤€ìœ¼ë¡œ ${Math.round(totalBudget / 2700)}í‰ê¹Œì§€ë„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
    document.getElementById('seo-meaning')!.textContent = meaningText;

    // ì í•©í•œ ëŒ€ìƒ
    let suitableText;
    if (totalBudget >= 80000) {
      suitableText = `ì‹¤ê±°ì£¼ì™€ íˆ¬ì ê°€ì¹˜ë¥¼ ëª¨ë‘ ê³ ë ¤í•˜ëŠ” ìì‚°ê°€, ì„œìš¸ ì£¼ìš” ì§€ì—­ í•™êµ°ì´ ì¤‘ìš”í•œ í•™ë¶€ëª¨, ` +
        `ì•ˆì •ì ì¸ ê³ ì†Œë“ ì§ì¥ì¸ìœ¼ë¡œ ì¥ê¸° ê±°ì£¼ë¥¼ ê³„íší•˜ëŠ” ë¶„, ì¬ê±´ì¶•/ë¦¬ëª¨ë¸ë§ íˆ¬ìì— ê´€ì‹¬ ìˆëŠ” ë¶„, ` +
        `ë¶€ëª¨ë‹˜ ì§€ì›ì´ë‚˜ ìƒì† ìê¸ˆì´ ìˆì–´ ìê¸°ìë³¸ ë¹„ìœ¨ì´ ë†’ì€ ë¶„ì—ê²Œ ì í•©í•œ êµ¬ë§¤ ì¡°ê±´ì…ë‹ˆë‹¤.`;
    } else if (totalBudget >= 50000) {
      suitableText = `ì‹ í˜¼ë¶€ë¶€ë¡œ ë‚´ ì§‘ ë§ˆë ¨ì„ ê³„íší•˜ëŠ” ë¶„, 1~2ì¸ ê°€êµ¬ë¡œ ì„œìš¸ ì¶œí‡´ê·¼ì´ í•„ìš”í•œ ì§ì¥ì¸, ` +
        `ì•ˆì •ì ì¸ ì§ì¥ê³¼ ê¾¸ì¤€í•œ ì €ì¶• ìŠµê´€ì„ ê°€ì§„ 30~40ëŒ€, ì „ì„¸ì—ì„œ ë§¤ë§¤ë¡œ ì „í™˜ì„ ê³ ë ¤í•˜ëŠ” ë¶„, ` +
        `ê²½ê¸°ê¶Œ ì‹ ë„ì‹œì˜ ì‹ ì¶• ì•„íŒŒíŠ¸ë¥¼ ì„ í˜¸í•˜ëŠ” ë¶„ì—ê²Œ í˜„ì‹¤ì ì¸ ì„ íƒì§€ê°€ ë©ë‹ˆë‹¤.`;
    } else {
      suitableText = `ì‚¬íšŒì´ˆë…„ìƒìœ¼ë¡œ ì²« ë‚´ ì§‘ ë§ˆë ¨ì˜ ê¸°ë°˜ì„ ë‹¤ì§€ëŠ” ë¶„, ì²­ì•½ ë‹¹ì²¨ì„ ëª©í‘œë¡œ ìê¸ˆì„ ëª¨ìœ¼ëŠ” ë¶„, ` +
        `ìˆ˜ë„ê¶Œ ì™¸ê³½ì´ë‚˜ ì§€ë°©ì—ì„œ ì‹¤ê±°ì£¼ìš© ì£¼íƒì„ ì°¾ëŠ” ë¶„, ì „ì„¸ ìê¸ˆì„ í™œìš©í•´ ê±°ì£¼ ì•ˆì •ì„±ì„ ë¨¼ì € í™•ë³´í•˜ë ¤ëŠ” ë¶„, ` +
        `ë¶€ëª¨ë‹˜ê³¼ í•©ê°€í•˜ê±°ë‚˜ ê°€ì¡± ì§€ì›ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤.`;
    }
    document.getElementById('seo-suitable')!.textContent = suitableText;

    // ì£¼ì˜ì‚¬í•­
    let cautionText = `ë¶€ë™ì‚° êµ¬ë§¤ ì‹œ ë°˜ë“œì‹œ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì²«ì§¸, ì·¨ë“ì„¸(1~3%), ì¤‘ê°œìˆ˜ìˆ˜ë£Œ(0.4~0.9%), ` +
      `ë“±ê¸°ë¹„ìš© ë“± ë¶€ëŒ€ë¹„ìš©ì´ ë§¤ë§¤ê°€ì˜ ì•½ 5~7% ì¶”ê°€ë©ë‹ˆë‹¤. ë‘˜ì§¸, DSR(ì´ë¶€ì±„ì›ë¦¬ê¸ˆìƒí™˜ë¹„ìœ¨) ê·œì œë¡œ ì†Œë“ ëŒ€ë¹„ ` +
      `ì—°ê°„ ì›ë¦¬ê¸ˆ ìƒí™˜ì•¡ì´ ì œí•œë˜ì–´ ì‹¤ì œ ëŒ€ì¶œ ê°€ëŠ¥ ê¸ˆì•¡ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `;
    if (ltv > 60) {
      cautionText += `ì…‹ì§¸, ê·€í•˜ì˜ LTV ${ltv}%ëŠ” ë‹¤ì†Œ ë†’ì€ í¸ìœ¼ë¡œ, ê¸ˆë¦¬ ì¸ìƒ ì‹œ ì´ì ë¶€ë‹´ì´ í¬ê²Œ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ` +
        `ë³€ë™ê¸ˆë¦¬ë³´ë‹¤ ê³ ì •ê¸ˆë¦¬ ìƒí’ˆì„ ìš°ì„  ê²€í† í•˜ê³ , ë¹„ìƒ ìê¸ˆì„ ì¶©ë¶„íˆ í™•ë³´í•œ í›„ êµ¬ë§¤ë¥¼ ì§„í–‰í•˜ì„¸ìš”. ` +
        `ë˜í•œ ì…ì£¼ í›„ ê´€ë¦¬ë¹„, ì¬ì‚°ì„¸ ë“± ì¶”ê°€ ë¹„ìš©ë„ ì›” 50~100ë§Œì› ìˆ˜ì¤€ìœ¼ë¡œ ì˜ˆìƒí•´ì•¼ í•©ë‹ˆë‹¤.`;
    } else {
      cautionText += `ì…‹ì§¸, ë¶€ë™ì‚° ì‹œì¥ ë³€ë™ì„±ì„ ê³ ë ¤í•˜ì—¬ ë¬´ë¦¬í•œ íˆ¬ê¸° ëª©ì ë³´ë‹¤ëŠ” ì‹¤ê±°ì£¼ ìœ„ì£¼ë¡œ ì ‘ê·¼í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ` +
        `ë˜í•œ í–¥í›„ ê¸ˆë¦¬ ë³€ë™, ì •ë¶€ ì •ì±… ë³€í™”, ì§€ì—­ ê°œë°œ ê³„íš ë“±ì„ ì¢…í•©ì ìœ¼ë¡œ ê²€í† í•˜ì—¬ ` +
        `ì¥ê¸°ì  ê´€ì ì—ì„œ ì˜ì‚¬ê²°ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.`;
    }
    document.getElementById('seo-caution')!.textContent = cautionText;

    // FAQ ìƒì„±
    const faqs = [
      {
        q: 'ì´ ê³„ì‚° ê²°ê³¼ëŠ” ì‹¤ì œ ëŒ€ì¶œ ì‹¬ì‚¬ì™€ ë™ì¼í•œê°€ìš”?',
        a: 'ì•„ë‹ˆìš”, ì´ ê³„ì‚°ê¸°ëŠ” ì¼ë°˜ì ì¸ DSR ê¸°ì¤€ì„ ì ìš©í•œ ì°¸ê³ ìš©ì…ë‹ˆë‹¤. ì‹¤ì œ ëŒ€ì¶œ í•œë„ëŠ” ê°œì¸ ì‹ ìš©ë“±ê¸‰, ê¸°ì¡´ ë¶€ì±„, ì§ì—… ì•ˆì •ì„±, ë‹´ë³´ ê°€ì¹˜ ë“±ì— ë”°ë¼ ê¸ˆìœµê¸°ê´€ë³„ë¡œ ë‹¤ë¥´ê²Œ ì‚°ì •ë©ë‹ˆë‹¤. ì •í™•í•œ ëŒ€ì¶œ ê°€ëŠ¥ ê¸ˆì•¡ì€ ì€í–‰ ìƒë‹´ì„ í†µí•´ í™•ì¸í•˜ì„¸ìš”.'
      },
      {
        q: 'DSR 40%ì™€ 60%ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
        a: 'DSR(ì´ë¶€ì±„ì›ë¦¬ê¸ˆìƒí™˜ë¹„ìœ¨)ì€ ì—°ì†Œë“ ëŒ€ë¹„ ì—°ê°„ ëŒ€ì¶œ ì›ë¦¬ê¸ˆ ìƒí™˜ì•¡ì˜ ë¹„ìœ¨ì…ë‹ˆë‹¤. DSR 40%ëŠ” ë³´ìˆ˜ì ì¸ ê¸°ì¤€ìœ¼ë¡œ ì›” ìƒí™˜ ë¶€ë‹´ì´ ì ê³ , 60%ëŠ” ì¼ë°˜ì ì¸ ìµœëŒ€ í•œë„ë¡œ ë” ë§ì€ ëŒ€ì¶œì´ ê°€ëŠ¥í•˜ì§€ë§Œ ìƒí™œë¹„ ì—¬ìœ ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.'
      },
      {
        q: 'ì‹¤ì œ ì•„íŒŒíŠ¸ ê°€ê²©ê³¼ ê³„ì‚° ê²°ê³¼ê°€ ë‹¤ë¥¸ ì´ìœ ëŠ”?',
        a: `ë³¸ ê³„ì‚°ê¸°ëŠ” 2026ë…„ ì„œìš¸/ìˆ˜ë„ê¶Œ í‰ê·  ì‹œì„¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤. ê°™ì€ ì§€ì—­ì´ë¼ë„ ì—­ì„¸ê¶Œ ì—¬ë¶€, ë¸Œëœë“œ, ì—°ì‹, ì¸µìˆ˜, í–¥ ë“±ì— ë”°ë¼ ê°€ê²©ì´ 20~50% ì°¨ì´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •í™•í•œ ì‹œì„¸ëŠ” êµ­í† êµí†µë¶€ ì‹¤ê±°ë˜ê°€ ê³µê°œì‹œìŠ¤í…œì´ë‚˜ ë¶€ë™ì‚° ì•±ì—ì„œ í™•ì¸í•˜ì„¸ìš”.`
      },
      {
        q: 'ì „ì„¸ vs ë§¤ë§¤, ì–´ë–¤ ê²ƒì´ ìœ ë¦¬í•œê°€ìš”?',
        a: `í˜„ì¬ ìì‚° ${assets.toLocaleString()}ë§Œì›ìœ¼ë¡œ ë§¤ë§¤ ì‹œ ${pyeong}í‰ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì „ì„¸ëŠ” ê°™ì€ ì§€ì—­ì—ì„œ ë” ë„“ì€ í‰ìˆ˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨, ì „ì„¸ëŠ” ìì‚° í˜•ì„±ì´ ë˜ì§€ ì•Šê³  ì „ì„¸ê°€ìœ¨ í•˜ë½ ì‹œ ë³´ì¦ê¸ˆ íšŒìˆ˜ ë¦¬ìŠ¤í¬ê°€ ìˆìŠµë‹ˆë‹¤. ì¥ê¸° ê±°ì£¼ ê³„íšì´ë¼ë©´ ë§¤ë§¤ê°€, ìœ ë™ì„±ì´ í•„ìš”í•˜ë©´ ì „ì„¸ê°€ ìœ ë¦¬í•©ë‹ˆë‹¤.`
      }
    ];

    const faqContainer = document.getElementById('faq-content')!;
    faqContainer.innerHTML = faqs.map(faq => `
      <details class="group">
        <summary class="flex justify-between items-center cursor-pointer list-none p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600">
          <span class="font-medium text-gray-900 dark:text-white">${faq.q}</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <p class="mt-2 px-3 text-gray-600 dark:text-gray-400 text-sm">${faq.a}</p>
      </details>
    `).join('');

    // JSON-LD FAQ Schema
    const faqSchema = {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqs.map(faq => ({
        "@type": "Question",
        "name": faq.q,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": faq.a
        }
      }))
    };

    let schemaScript = document.getElementById('faq-schema');
    if (!schemaScript) {
      schemaScript = document.createElement('script');
      schemaScript.id = 'faq-schema';
      schemaScript.type = 'application/ld+json';
      document.head.appendChild(schemaScript);
    }
    schemaScript.textContent = JSON.stringify(faqSchema);
  }
</script>
