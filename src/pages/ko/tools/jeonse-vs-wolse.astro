---
import Layout from '../../../layouts/Layout.astro';
import AdBanner from '../../../components/AdBanner.astro';
import ToolSeoContent from '../../../components/ToolSeoContent.astro';
import { getTool, generateToolBreadcrumbSchema, generateToolHowToSchema, calculatorSteps, getToolStepType } from '../../../utils/tools';

const lang = 'ko';
const tool = getTool('jeonse-vs-wolse', lang);
const siteUrl = 'https://judysylph.com';
const stepType = getToolStepType('jeonse-vs-wolse');
const steps = calculatorSteps[lang][stepType];

const webAppSchema = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": tool?.title,
  "description": tool?.description,
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "All",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
};

const breadcrumbSchema = tool ? generateToolBreadcrumbSchema(tool, lang, siteUrl) : null;
const howToSchema = tool ? generateToolHowToSchema(tool, lang, siteUrl, steps) : null;
const jsonLd = [webAppSchema, breadcrumbSchema, howToSchema].filter(Boolean);
---

<Layout title={`${tool?.title} | JudySylph`} description={tool?.description} jsonLd={jsonLd}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <div class="text-5xl mb-4">{tool?.emoji}</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">{tool?.title}</h1>
      <p class="text-gray-600 dark:text-gray-400">{tool?.description}</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
      <form id="calc-form" class="space-y-6">
        <div class="grid grid-cols-2 gap-4">
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
            <h3 class="font-bold text-blue-800 dark:text-blue-200 mb-3">ğŸ  ì „ì„¸ ì¡°ê±´</h3>
            <div class="space-y-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ì „ì„¸ ë³´ì¦ê¸ˆ</label>
                <input type="text" id="jeonseDeposit" placeholder="30,000" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500 mt-1">ë§Œì›</p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ì „ì„¸ëŒ€ì¶œ ê¸ˆì•¡</label>
                <input type="text" id="jeonseLoan" placeholder="20,000" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500 mt-1">ë§Œì› (ì—†ìœ¼ë©´ 0)</p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ì „ì„¸ëŒ€ì¶œ ê¸ˆë¦¬</label>
                <input type="number" id="jeonseLoanRate" placeholder="3.5" step="0.1" value="3.5" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500 mt-1">ì—° %</p>
              </div>
            </div>
          </div>

          <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4">
            <h3 class="font-bold text-green-800 dark:text-green-200 mb-3">ğŸ¢ ì›”ì„¸ ì¡°ê±´</h3>
            <div class="space-y-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ì›”ì„¸ ë³´ì¦ê¸ˆ</label>
                <input type="text" id="wolseDeposit" placeholder="3,000" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500 mt-1">ë§Œì›</p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ì›”ì„¸</label>
                <input type="text" id="monthlyRent" placeholder="100" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500 mt-1">ë§Œì›/ì›”</p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ê´€ë¦¬ë¹„ ì°¨ì´</label>
                <input type="text" id="maintenanceDiff" placeholder="0" value="0" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500 mt-1">ë§Œì› (ì›”ì„¸ê°€ ë” ë¹„ì‹¸ë©´ +)</p>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4">
          <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3">ğŸ“Š ê³µí†µ ì¡°ê±´</h3>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ê±°ì£¼ ì˜ˆì • ê¸°ê°„</label>
              <select id="stayYears" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                <option value="1">1ë…„</option>
                <option value="2" selected>2ë…„</option>
                <option value="3">3ë…„</option>
                <option value="4">4ë…„</option>
                <option value="5">5ë…„ ì´ìƒ</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ì—¬ìœ  ìê¸ˆ íˆ¬ì ìˆ˜ìµë¥ </label>
              <input type="number" id="investReturn" placeholder="4" step="0.5" value="4" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
              <p class="text-xs text-gray-500 mt-1">ì—° % (ì˜ˆê¸ˆ/íˆ¬ì)</p>
            </div>
          </div>
        </div>

        <button type="submit" class="w-full px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700">ë¹„êµ ë¶„ì„í•˜ê¸°</button>
      </form>

      <div id="result-area" class="mt-8 hidden">
        <div id="result-header" class="rounded-2xl p-6 text-white text-center mb-6">
          <div id="verdict-emoji" class="text-5xl mb-2"></div>
          <div id="verdict" class="text-2xl font-bold mb-2"></div>
          <div id="verdict-desc" class="text-lg opacity-90"></div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6">
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
            <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-3 text-center">ğŸ  ì „ì„¸ ì„ íƒ ì‹œ</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">í•„ìš” ìê¸ˆ</span><span id="j-capital" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ëŒ€ì¶œì´ì</span><span id="j-monthly" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ë¹„ìš© (ê¸°ê°„)</span><span id="j-total" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ê¸°íšŒë¹„ìš©</span><span id="j-opportunity" class="font-medium text-red-500">-</span></div>
            </div>
          </div>
          <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4">
            <h4 class="font-bold text-green-800 dark:text-green-200 mb-3 text-center">ğŸ¢ ì›”ì„¸ ì„ íƒ ì‹œ</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">í•„ìš” ìê¸ˆ</span><span id="w-capital" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ì§€ì¶œ</span><span id="w-monthly" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ë¹„ìš© (ê¸°ê°„)</span><span id="w-total" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">íˆ¬ì ìˆ˜ìµ</span><span id="w-investment" class="font-medium text-green-600">-</span></div>
            </div>
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-4">ğŸ“Š ìµœì¢… ë¹„êµ</h3>
          <div class="space-y-3">
            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <span class="text-gray-600 dark:text-gray-400">ì „ì„¸ ì‹¤ì§ˆ ë¹„ìš©</span>
              <span id="j-real-cost" class="font-bold text-blue-600"></span>
            </div>
            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <span class="text-gray-600 dark:text-gray-400">ì›”ì„¸ ì‹¤ì§ˆ ë¹„ìš©</span>
              <span id="w-real-cost" class="font-bold text-green-600"></span>
            </div>
            <div class="flex justify-between items-center p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg">
              <span class="text-primary-700 dark:text-primary-300 font-medium">ì°¨ì´</span>
              <span id="cost-diff" class="font-bold text-xl"></span>
            </div>
          </div>
        </div>

        <!-- SEO Content -->
        <div id="seo-content" class="mt-8 space-y-6">
          <h2 id="seo-summary" class="text-2xl font-bold text-gray-900 dark:text-white"></h2>
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ“Œ ì´ ê²°ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ</h3>
            <p id="seo-meaning" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <!-- AD_SLOT: middle-content -->
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ‘¤ ì´ëŸ° ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤</h3>
            <p id="seo-suitable" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì </h3>
            <p id="seo-caution" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <!-- AD_SLOT: before-faq -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
            <div id="faq-content" class="space-y-4"></div>
          </div>
          <div class="bg-primary-50 dark:bg-primary-900/20 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-3">ğŸ”— ê´€ë ¨ ê³„ì‚°ê¸°</h3>
            <div class="flex flex-wrap gap-2">
              <a href="/ko/tools/jeonse-loan" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ  ì „ì„¸ëŒ€ì¶œ ê³„ì‚°ê¸°</a>
              <a href="/ko/tools/apartment-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ¢ ë‚´ ì—°ë´‰ìœ¼ë¡œ ê°€ëŠ¥í•œ ì•„íŒŒíŠ¸</a>
              <a href="/ko/tools/loan-refinance" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ”„ ëŒ€ì¶œ ê°ˆì•„íƒ€ê¸° ê³„ì‚°ê¸°</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <AdBanner className="mt-8" />

    <!-- SEO Content -->
    <ToolSeoContent
      title={tool?.title || ''}
      description={tool?.description || ''}
      emoji={tool?.emoji || ''}
      category={tool?.category || ''}
      lang={lang}
      slug={tool?.slug || ''}
    />

    <div class="mt-8 text-center"><a href="/ko/tools" class="text-primary-600 dark:text-primary-400 hover:underline">â† ë„êµ¬ ëª©ë¡</a></div>
  </div>
</Layout>

<script>
  const form = document.getElementById('calc-form') as HTMLFormElement;
  const numInputs = ['jeonseDeposit', 'jeonseLoan', 'wolseDeposit', 'monthlyRent', 'maintenanceDiff'];

  numInputs.forEach(id => {
    const el = document.getElementById(id) as HTMLInputElement;
    el?.addEventListener('input', e => {
      const v = (e.target as HTMLInputElement).value.replace(/[^\d-]/g,'');
      if (v === '' || v === '-') {
        (e.target as HTMLInputElement).value = v;
      } else {
        (e.target as HTMLInputElement).value = Number(v).toLocaleString('ko-KR');
      }
    });
  });

  form?.addEventListener('submit', e => {
    e.preventDefault();

    const jeonseDeposit = parseInt((document.getElementById('jeonseDeposit') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const jeonseLoan = parseInt((document.getElementById('jeonseLoan') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const jeonseLoanRate = parseFloat((document.getElementById('jeonseLoanRate') as HTMLInputElement).value) || 0;
    const wolseDeposit = parseInt((document.getElementById('wolseDeposit') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const monthlyRent = parseInt((document.getElementById('monthlyRent') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const maintenanceDiff = parseInt((document.getElementById('maintenanceDiff') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const stayYears = parseInt((document.getElementById('stayYears') as HTMLSelectElement).value);
    const investReturn = parseFloat((document.getElementById('investReturn') as HTMLInputElement).value) || 0;

    const stayMonths = stayYears * 12;

    // ì „ì„¸ ê³„ì‚°
    const jeonseOwnCapital = jeonseDeposit - jeonseLoan; // ìê¸°ìë³¸
    const jeonseMonthlyInterest = jeonseLoan * 10000 * (jeonseLoanRate / 100 / 12);
    const jeonseTotalInterest = jeonseMonthlyInterest * stayMonths;
    const jeonseOpportunityCost = jeonseOwnCapital * 10000 * (investReturn / 100) * stayYears;

    // ì›”ì„¸ ê³„ì‚°
    const wolseOwnCapital = wolseDeposit;
    const wolseMonthlyTotal = monthlyRent + maintenanceDiff;
    const wolseTotalRent = wolseMonthlyTotal * stayMonths * 10000;
    const excessCapital = (jeonseOwnCapital - wolseOwnCapital) * 10000; // ì—¬ìœ ìê¸ˆ
    const wolseInvestmentReturn = excessCapital > 0 ? excessCapital * (investReturn / 100) * stayYears : 0;

    // ì‹¤ì§ˆ ë¹„ìš© ê³„ì‚°
    const jeonseRealCost = jeonseTotalInterest + jeonseOpportunityCost;
    const wolseRealCost = wolseTotalRent - wolseInvestmentReturn;
    const costDiff = jeonseRealCost - wolseRealCost;

    document.getElementById('result-area')?.classList.remove('hidden');

    // Verdict
    const header = document.getElementById('result-header')!;
    let verdictEmoji, verdict, verdictDesc, headerColor;
    const isJeonseBetter = costDiff > 0;
    const diffMan = Math.abs(Math.round(costDiff / 10000));

    if (Math.abs(costDiff) < 1000000) {
      verdictEmoji = 'âš–ï¸';
      verdict = 'ë¹„ìŠ·í•œ ìˆ˜ì¤€';
      verdictDesc = 'ê°œì¸ ìƒí™©ê³¼ ì„ í˜¸ì— ë”°ë¼ ì„ íƒí•˜ì„¸ìš”';
      headerColor = 'bg-gradient-to-br from-gray-500 to-slate-600';
    } else if (isJeonseBetter) {
      verdictEmoji = 'ğŸ¢';
      verdict = 'ì›”ì„¸ê°€ ìœ ë¦¬!';
      verdictDesc = `${stayYears}ë…„ê°„ ${diffMan.toLocaleString()}ë§Œì› ì ˆê°`;
      headerColor = 'bg-gradient-to-br from-green-500 to-emerald-600';
    } else {
      verdictEmoji = 'ğŸ ';
      verdict = 'ì „ì„¸ê°€ ìœ ë¦¬!';
      verdictDesc = `${stayYears}ë…„ê°„ ${diffMan.toLocaleString()}ë§Œì› ì ˆê°`;
      headerColor = 'bg-gradient-to-br from-blue-500 to-cyan-600';
    }

    header.className = `${headerColor} rounded-2xl p-6 text-white text-center mb-6`;
    document.getElementById('verdict-emoji')!.textContent = verdictEmoji;
    document.getElementById('verdict')!.textContent = verdict;
    document.getElementById('verdict-desc')!.textContent = verdictDesc;

    // ì „ì„¸ ìƒì„¸
    document.getElementById('j-capital')!.textContent = jeonseOwnCapital.toLocaleString() + 'ë§Œì›';
    document.getElementById('j-monthly')!.textContent = Math.round(jeonseMonthlyInterest).toLocaleString() + 'ì›';
    document.getElementById('j-total')!.textContent = Math.round(jeonseTotalInterest / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('j-opportunity')!.textContent = '-' + Math.round(jeonseOpportunityCost / 10000).toLocaleString() + 'ë§Œì›';

    // ì›”ì„¸ ìƒì„¸
    document.getElementById('w-capital')!.textContent = wolseOwnCapital.toLocaleString() + 'ë§Œì›';
    document.getElementById('w-monthly')!.textContent = wolseMonthlyTotal.toLocaleString() + 'ë§Œì›';
    document.getElementById('w-total')!.textContent = Math.round(wolseTotalRent / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('w-investment')!.textContent = '+' + Math.round(wolseInvestmentReturn / 10000).toLocaleString() + 'ë§Œì›';

    // ìµœì¢… ë¹„êµ
    document.getElementById('j-real-cost')!.textContent = Math.round(jeonseRealCost / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('w-real-cost')!.textContent = Math.round(wolseRealCost / 10000).toLocaleString() + 'ë§Œì›';

    const costDiffEl = document.getElementById('cost-diff')!;
    if (isJeonseBetter) {
      costDiffEl.textContent = `ì›”ì„¸ê°€ ${diffMan.toLocaleString()}ë§Œì› ìœ ë¦¬`;
      costDiffEl.className = 'font-bold text-xl text-green-600';
    } else if (costDiff < 0) {
      costDiffEl.textContent = `ì „ì„¸ê°€ ${diffMan.toLocaleString()}ë§Œì› ìœ ë¦¬`;
      costDiffEl.className = 'font-bold text-xl text-blue-600';
    } else {
      costDiffEl.textContent = 'ë¹„ìŠ·í•¨';
      costDiffEl.className = 'font-bold text-xl text-gray-600';
    }

    // SEO
    generateSeoContent(jeonseDeposit, jeonseLoan, wolseDeposit, monthlyRent, stayYears, investReturn, jeonseRealCost, wolseRealCost, excessCapital);
  });

  function generateSeoContent(jeonseDeposit: number, jeonseLoan: number, wolseDeposit: number, monthlyRent: number, stayYears: number, investReturn: number, jeonseRealCost: number, wolseRealCost: number, excessCapital: number) {
    const isJeonseBetter = wolseRealCost > jeonseRealCost;
    const diffMan = Math.abs(Math.round((jeonseRealCost - wolseRealCost) / 10000));

    // Summary
    let summaryText;
    if (diffMan < 100) {
      summaryText = `ì „ì„¸ ${jeonseDeposit.toLocaleString()}ë§Œì› vs ì›”ì„¸ ${wolseDeposit.toLocaleString()}ë§Œì›/${monthlyRent}ë§Œì› ë¹„êµ ê²°ê³¼, ${stayYears}ë…„ ê¸°ì¤€ ì‹¤ì§ˆ ë¹„ìš©ì´ ë¹„ìŠ·í•©ë‹ˆë‹¤`;
    } else if (isJeonseBetter) {
      summaryText = `${stayYears}ë…„ ê±°ì£¼ ì‹œ ì „ì„¸ê°€ ${diffMan.toLocaleString()}ë§Œì› ë” ìœ ë¦¬í•©ë‹ˆë‹¤ (ê¸°íšŒë¹„ìš© í¬í•¨)`;
    } else {
      summaryText = `${stayYears}ë…„ ê±°ì£¼ ì‹œ ì›”ì„¸ê°€ ${diffMan.toLocaleString()}ë§Œì› ë” ìœ ë¦¬í•©ë‹ˆë‹¤ (íˆ¬ììˆ˜ìµ í¬í•¨)`;
    }
    document.getElementById('seo-summary')!.textContent = `ğŸ“‹ ê²°ê³¼ ìš”ì•½: ${summaryText}`;

    // Meaning
    const meaningText = `ì „ì„¸ ë³´ì¦ê¸ˆ ${jeonseDeposit.toLocaleString()}ë§Œì›(ëŒ€ì¶œ ${jeonseLoan.toLocaleString()}ë§Œì› í¬í•¨)ê³¼ ` +
      `ì›”ì„¸ ë³´ì¦ê¸ˆ ${wolseDeposit.toLocaleString()}ë§Œì›/ì›” ${monthlyRent}ë§Œì›ì„ ${stayYears}ë…„ê°„ ë¹„êµí–ˆìŠµë‹ˆë‹¤. ` +
      `ì „ì„¸ì˜ ê²½ìš° ëŒ€ì¶œ ì´ìì™€ ìê¸°ìë³¸ì— ëŒ€í•œ ê¸°íšŒë¹„ìš©(ì—° ${investReturn}% ìˆ˜ìµ ê°€ì •)ì„ ê³ ë ¤í–ˆê³ , ` +
      `ì›”ì„¸ì˜ ê²½ìš° ì´ ì„ëŒ€ë£Œì—ì„œ ì—¬ìœ  ìê¸ˆ(${Math.round(excessCapital/10000).toLocaleString()}ë§Œì›)ì˜ íˆ¬ì ìˆ˜ìµì„ ì°¨ê°í–ˆìŠµë‹ˆë‹¤. ` +
      `ì´ ë¶„ì„ì€ ë‹¨ìˆœ ì›” ì§€ì¶œ ë¹„êµê°€ ì•„ë‹Œ, ìë³¸ì˜ ì‹œê°„ ê°€ì¹˜ì™€ ê¸°íšŒë¹„ìš©ì„ í¬í•¨í•œ ì‹¤ì§ˆ ë¹„ìš© ë¹„êµì…ë‹ˆë‹¤.`;
    document.getElementById('seo-meaning')!.textContent = meaningText;

    // Suitable
    let suitableText;
    if (isJeonseBetter) {
      suitableText = `ì „ì„¸ê°€ ìœ ë¦¬í•œ ìƒí™©ì…ë‹ˆë‹¤. ìê¸°ìë³¸ì´ ì¶©ë¶„í•˜ê³  ë‚®ì€ ê¸ˆë¦¬ë¡œ ì „ì„¸ëŒ€ì¶œì´ ê°€ëŠ¥í•œ ë¶„, ` +
        `2ë…„ ì´ìƒ ì¥ê¸° ê±°ì£¼ê°€ í™•ì‹¤í•œ ë¶„, ë³´ì¦ê¸ˆ íšŒìˆ˜ ë¦¬ìŠ¤í¬ê°€ ë‚®ì€ ì•ˆì „í•œ ë§¤ë¬¼ì„ ì°¾ì€ ë¶„, ` +
        `íˆ¬ìë³´ë‹¤ ì£¼ê±° ì•ˆì •ì„±ì„ ìš°ì„ ì‹œí•˜ëŠ” ë¶„ì—ê²Œ ì „ì„¸ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.`;
    } else {
      suitableText = `ì›”ì„¸ê°€ ìœ ë¦¬í•œ ìƒí™©ì…ë‹ˆë‹¤. ìê¸°ìë³¸ì„ íˆ¬ìë‚˜ ì €ì¶•ì— í™œìš©í•˜ê³  ì‹¶ì€ ë¶„, ` +
        `1~2ë…„ ë‚´ ì´ì‚¬ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ë¶„, ì „ì„¸ ì‚¬ê¸° ë¦¬ìŠ¤í¬ë¥¼ í”¼í•˜ê³  ì‹¶ì€ ë¶„, ` +
        `ì›” í˜„ê¸ˆ íë¦„ ê´€ë¦¬ê°€ ê°€ëŠ¥í•œ ì•ˆì •ì ì¸ ì†Œë“ì´ ìˆëŠ” ë¶„ì—ê²Œ ì›”ì„¸ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.`;
    }
    document.getElementById('seo-suitable')!.textContent = suitableText;

    // Caution
    const cautionText = `ì´ ê³„ì‚°ì—ì„œ ê³ ë ¤í•˜ì§€ ëª»í•œ ìš”ì†Œë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì²«ì§¸, ì „ì„¸ê°€ í•˜ë½ ì‹œ ë³´ì¦ê¸ˆ ë°˜í™˜ ë¦¬ìŠ¤í¬ê°€ ìˆìœ¼ë©°, ` +
      `ìµœê·¼ ì—­ì „ì„¸ ìƒí™©ì—ì„œëŠ” ì´ ë¦¬ìŠ¤í¬ê°€ ì»¤ì¡ŒìŠµë‹ˆë‹¤. ë‘˜ì§¸, ì›”ì„¸ëŠ” ì†Œë“ê³µì œ(ì—° 750ë§Œì› í•œë„, 15~17% ì„¸ì•¡ê³µì œ) í˜œíƒì´ ìˆìŠµë‹ˆë‹¤. ` +
      `ì…‹ì§¸, ì „ì„¸ëŒ€ì¶œ ê¸ˆë¦¬ ë³€ë™, íˆ¬ì ìˆ˜ìµë¥  ë³€ë™ì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ` +
      `ë„·ì§¸, ê³„ì•½ ê°±ì‹  ì‹œ ì¸ìƒë¥ (ì „ì„¸ 5% ìƒí•œ, ì›”ì„¸ëŠ” í˜‘ì˜)ë„ ì¥ê¸° ê±°ì£¼ ì‹œ ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.`;
    document.getElementById('seo-caution')!.textContent = cautionText;

    // FAQ
    const faqs = [
      {
        q: 'ì „ì„¸ vs ì›”ì„¸, ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì„ íƒí•´ì•¼ í•˜ë‚˜ìš”?',
        a: `í•µì‹¬ì€ 'ìê¸°ìë³¸ì˜ ê¸°íšŒë¹„ìš©'ì…ë‹ˆë‹¤. ì „ì„¸ ë³´ì¦ê¸ˆìœ¼ë¡œ ë¬¶ì´ëŠ” ëˆì„ ë‹¤ë¥¸ ê³³ì— íˆ¬ìí–ˆì„ ë•Œ ì–»ì„ ìˆ˜ìµê³¼, ì›”ì„¸ë¡œ ë‚˜ê°€ëŠ” ëˆì„ ë¹„êµí•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ${investReturn}% ìˆ˜ìµë¥  ê°€ì • ì‹œ, ${isJeonseBetter ? 'ì „ì„¸' : 'ì›”ì„¸'}ê°€ ${diffMan.toLocaleString()}ë§Œì› ìœ ë¦¬í•©ë‹ˆë‹¤.`
      },
      {
        q: 'ì „ì„¸ëŒ€ì¶œì„ ë°›ìœ¼ë©´ ì „ì„¸ê°€ ë¬´ì¡°ê±´ ìœ ë¦¬í•œê°€ìš”?',
        a: `ì•„ë‹™ë‹ˆë‹¤. ì „ì„¸ëŒ€ì¶œ ì´ìê°€ ì›”ì„¸ì™€ ë¹„ìŠ·í•˜ê±°ë‚˜ ë†’ìœ¼ë©´ ì›”ì„¸ê°€ ìœ ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ì „ì„¸ëŒ€ì¶œ ê¸ˆë¦¬ì™€ ì „ì›”ì„¸ ì „í™˜ìœ¨(ì—° 4~6%)ì„ ë¹„êµí•˜ì„¸ìš”. ë˜í•œ ì „ì„¸ëŒ€ì¶œì—ë„ ìê¸°ìë³¸(ë³´í†µ ë³´ì¦ê¸ˆì˜ 20~30%)ì´ í•„ìš”í•©ë‹ˆë‹¤.`
      },
      {
        q: 'ì „ì„¸ ì‚¬ê¸°ê°€ ê±±ì •ë˜ëŠ”ë° ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?',
        a: '1) ë“±ê¸°ë¶€ë“±ë³¸ì—ì„œ ê·¼ì €ë‹¹ ì„¤ì • í™•ì¸, 2) ì „ì„¸ê°€ìœ¨ 80% ì´í•˜ ë§¤ë¬¼ ì„ íƒ, 3) ì „ì„¸ë³´ì¦ë³´í—˜(HUG/SGI) ê°€ì…, 4) ì„ëŒ€ì¸ ì²´ë‚©ì„¸ê¸ˆ í™•ì¸, 5) ê³µì¸ì¤‘ê°œì‚¬ í†µí•œ ê³„ì•½ì„ ê¶Œì¥í•©ë‹ˆë‹¤. ìœ„í—˜ ë§¤ë¬¼ì´ë¼ë©´ ì›”ì„¸ê°€ ë” ì•ˆì „í•©ë‹ˆë‹¤.'
      },
      {
        q: 'ëª‡ ë…„ ì´ìƒ ì‚´ì•„ì•¼ ì „ì„¸ê°€ ìœ ë¦¬í•œê°€ìš”?',
        a: `ì¼ë°˜ì ìœ¼ë¡œ 2ë…„ ì´ìƒì´ë©´ ì „ì„¸ê°€ ìœ ë¦¬í•˜ê³ , 1ë…„ ë¯¸ë§Œì€ ì›”ì„¸ê°€ ìœ ë¦¬í•œ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. í˜„ì¬ ì¡°ê±´ì—ì„œëŠ” ${stayYears}ë…„ ê¸°ì¤€ìœ¼ë¡œ ${isJeonseBetter ? 'ì „ì„¸' : 'ì›”ì„¸'}ê°€ ìœ ë¦¬í•©ë‹ˆë‹¤. ë‹¨, ì´ì‚¬ë¹„ìš©ê³¼ ì¤‘ê°œìˆ˜ìˆ˜ë£Œë„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.`
      }
    ];

    const faqContainer = document.getElementById('faq-content')!;
    faqContainer.innerHTML = faqs.map(faq => `
      <details class="group">
        <summary class="flex justify-between items-center cursor-pointer list-none p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600">
          <span class="font-medium text-gray-900 dark:text-white">${faq.q}</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <p class="mt-2 px-3 text-gray-600 dark:text-gray-400 text-sm">${faq.a}</p>
      </details>
    `).join('');

    // JSON-LD
    const faqSchema = {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqs.map(faq => ({
        "@type": "Question",
        "name": faq.q,
        "acceptedAnswer": { "@type": "Answer", "text": faq.a }
      }))
    };
    let schemaScript = document.getElementById('faq-schema') as HTMLScriptElement;
    if (!schemaScript) {
      schemaScript = document.createElement('script');
      schemaScript.id = 'faq-schema';
      schemaScript.type = 'application/ld+json';
      document.head.appendChild(schemaScript);
    }
    schemaScript.textContent = JSON.stringify(faqSchema);
  }
</script>
