---
import Layout from '../../../layouts/Layout.astro';
import { getTool, generateToolBreadcrumbSchema, generateToolHowToSchema, calculatorSteps, getToolStepType } from '../../../utils/tools';

const lang = 'ko';
const tool = getTool('salary-percentile', lang);
const siteUrl = 'https://judysylph.com';
const stepType = getToolStepType('salary-percentile');
const steps = calculatorSteps[lang][stepType];

const webAppSchema = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": tool?.title,
  "description": tool?.description,
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "All",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
};

const breadcrumbSchema = tool ? generateToolBreadcrumbSchema(tool, lang, siteUrl) : null;
const howToSchema = tool ? generateToolHowToSchema(tool, lang, siteUrl, steps) : null;
const jsonLd = [webAppSchema, breadcrumbSchema, howToSchema].filter(Boolean);
---

<Layout title={`${tool?.title} | JudySylph`} description={tool?.description} jsonLd={jsonLd}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <div class="text-5xl mb-4">{tool?.emoji}</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">{tool?.title}</h1>
      <p class="text-gray-600 dark:text-gray-400">{tool?.description}</p>
      <p class="text-sm text-primary-600 dark:text-primary-400 mt-2">2026ë…„ í†µê³„ì²­ ìë£Œ ê¸°ì¤€</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
      <form id="calc-form" class="space-y-6">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ë‚˜ì´</label>
            <input type="number" id="age" placeholder="30" min="20" max="65" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì„±ë³„</label>
            <select id="gender" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option value="all">ì „ì²´</option>
              <option value="male">ë‚¨ì„±</option>
              <option value="female">ì—¬ì„±</option>
            </select>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì—°ë´‰ (ì„¸ì „)</label>
          <input type="text" id="salary" placeholder="5,000" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
          <p class="text-xs text-gray-500 mt-1">ë§Œì› ë‹¨ìœ„ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
        </div>
        <button type="submit" class="w-full px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700">ë‚´ ìˆœìœ„ í™•ì¸í•˜ê¸°</button>
      </form>

      <div id="result-area" class="mt-8 hidden">
        <div id="result-header" class="rounded-2xl p-8 text-white text-center mb-6">
          <div class="text-lg opacity-90 mb-2">ë‹¹ì‹ ì˜ ì—°ë´‰ ìˆœìœ„</div>
          <div id="percentile" class="text-6xl font-bold mb-2">-</div>
          <div id="percentile-desc" class="text-xl opacity-90">-</div>
        </div>

        <div class="grid grid-cols-3 gap-4 mb-6">
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 text-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">ë™ë…„ë°° í‰ê· </div>
            <div id="r-avg" class="text-xl font-bold text-gray-900 dark:text-white">-</div>
          </div>
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 text-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">í‰ê·  ëŒ€ë¹„</div>
            <div id="r-diff" class="text-xl font-bold">-</div>
          </div>
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 text-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">ë‹¹ì‹ ë³´ë‹¤ ì ê²Œ ë²„ëŠ”</div>
            <div id="r-below" class="text-xl font-bold text-primary-600 dark:text-primary-400">-</div>
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-4">ì—°ë´‰ ë¶„í¬ (ë™ë…„ë°° ê¸°ì¤€)</h3>
          <div class="relative h-8 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden mb-4">
            <div id="distribution-bar" class="absolute left-0 top-0 h-full bg-gradient-to-r from-blue-400 to-purple-500 transition-all duration-500"></div>
            <div id="position-marker" class="absolute top-0 w-1 h-full bg-red-500 transition-all duration-500"></div>
          </div>
          <div class="flex justify-between text-xs text-gray-500">
            <span>í•˜ìœ„ 10%</span>
            <span>ì¤‘ìœ„ 50%</span>
            <span>ìƒìœ„ 10%</span>
          </div>
        </div>

        <div id="comparison-box" class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-3">ğŸ’¼ ë¹„êµ ë¶„ì„</h3>
          <div id="comparisons" class="space-y-2 text-sm"></div>
        </div>

        <div id="advice-box" class="rounded-xl p-5">
          <h3 class="font-bold mb-2" id="advice-title">-</h3>
          <p id="advice-text" class="text-sm"></p>
        </div>

        <!-- SEO í•´ì„ ì½˜í…ì¸  -->
        <div id="seo-content" class="mt-8 space-y-6">
          <h2 id="seo-summary" class="text-2xl font-bold text-gray-900 dark:text-white"></h2>

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ“Œ ì´ ê²°ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ</h3>
            <p id="seo-meaning" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <!-- ê´‘ê³  ì‚½ì… ì˜ì—­ -->
          <!-- AD_SLOT: middle-content -->

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ‘¤ ì´ëŸ° ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤</h3>
            <p id="seo-suitable" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì </h3>
            <p id="seo-caution" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <!-- ê´‘ê³  ì‚½ì… ì˜ì—­ -->
          <!-- AD_SLOT: before-faq -->

          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
            <div id="faq-content" class="space-y-4"></div>
          </div>

          <div class="bg-primary-50 dark:bg-primary-900/20 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-3">ğŸ”— ê´€ë ¨ ê³„ì‚°ê¸°</h3>
            <div class="flex flex-wrap gap-2">
              <a href="/ko/tools/car-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸš— ë‚´ ì—°ë´‰ìœ¼ë¡œ ì‚´ ìˆ˜ ìˆëŠ” ì°¨</a>
              <a href="/ko/tools/apartment-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ¢ ë‚´ ì—°ë´‰ìœ¼ë¡œ ê°€ëŠ¥í•œ ì•„íŒŒíŠ¸</a>
              <a href="/ko/tools/salary-calculator" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ’° ì—°ë´‰ ì‹¤ìˆ˜ë ¹ì•¡ ê³„ì‚°ê¸°</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
      <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">2026ë…„ ì—°ë ¹ëŒ€ë³„ í‰ê·  ì—°ë´‰</h4>
      <div class="grid grid-cols-2 gap-2 text-sm text-blue-700 dark:text-blue-300">
        <p>â€¢ 20ëŒ€: 3,200ë§Œì›</p>
        <p>â€¢ 30ëŒ€: 4,800ë§Œì›</p>
        <p>â€¢ 40ëŒ€: 5,600ë§Œì›</p>
        <p>â€¢ 50ëŒ€: 5,200ë§Œì›</p>
      </div>
    </div>
    <div class="mt-8 text-center"><a href="/ko/tools" class="text-primary-600 dark:text-primary-400 hover:underline">â† ë„êµ¬ ëª©ë¡</a></div>
  </div>
</Layout>

<script>
  const form = document.getElementById('calc-form') as HTMLFormElement;
  const salaryInput = document.getElementById('salary') as HTMLInputElement;

  salaryInput?.addEventListener('input', e => {
    const v = (e.target as HTMLInputElement).value.replace(/\D/g,'');
    (e.target as HTMLInputElement).value = Number(v).toLocaleString('ko-KR');
  });

  // 2026ë…„ ì—°ë ¹ëŒ€ë³„ ì—°ë´‰ í†µê³„ (ë§Œì›, ëŒ€ëµì  ì¶”ì •ì¹˜)
  const salaryStats: Record<string, Record<string, {avg: number; median: number; p10: number; p25: number; p75: number; p90: number}>> = {
    all: {
      '20': { avg: 3200, median: 3000, p10: 2200, p25: 2600, p75: 3600, p90: 4200 },
      '25': { avg: 3500, median: 3300, p10: 2400, p25: 2900, p75: 4000, p90: 4800 },
      '30': { avg: 4200, median: 3800, p10: 2800, p25: 3200, p75: 4800, p90: 6000 },
      '35': { avg: 5000, median: 4500, p10: 3200, p25: 3800, p75: 5800, p90: 7500 },
      '40': { avg: 5600, median: 5000, p10: 3500, p25: 4200, p75: 6500, p90: 8500 },
      '45': { avg: 5800, median: 5200, p10: 3600, p25: 4400, p75: 6800, p90: 9000 },
      '50': { avg: 5400, median: 4800, p10: 3200, p25: 4000, p75: 6200, p90: 8000 },
      '55': { avg: 4800, median: 4200, p10: 2800, p25: 3500, p75: 5500, p90: 7000 },
      '60': { avg: 4000, median: 3500, p10: 2400, p25: 3000, p75: 4800, p90: 6000 }
    },
    male: {
      '20': { avg: 3400, median: 3200, p10: 2400, p25: 2800, p75: 3800, p90: 4500 },
      '25': { avg: 3800, median: 3600, p10: 2600, p25: 3100, p75: 4300, p90: 5200 },
      '30': { avg: 4800, median: 4300, p10: 3200, p25: 3700, p75: 5500, p90: 7000 },
      '35': { avg: 5800, median: 5200, p10: 3800, p25: 4500, p75: 6800, p90: 9000 },
      '40': { avg: 6500, median: 5800, p10: 4000, p25: 4800, p75: 7500, p90: 10000 },
      '45': { avg: 6800, median: 6000, p10: 4200, p25: 5000, p75: 8000, p90: 11000 },
      '50': { avg: 6200, median: 5500, p10: 3800, p25: 4600, p75: 7200, p90: 9500 },
      '55': { avg: 5500, median: 4800, p10: 3200, p25: 4000, p75: 6500, p90: 8500 },
      '60': { avg: 4500, median: 4000, p10: 2800, p25: 3400, p75: 5500, p90: 7000 }
    },
    female: {
      '20': { avg: 3000, median: 2800, p10: 2000, p25: 2400, p75: 3400, p90: 4000 },
      '25': { avg: 3200, median: 3000, p10: 2200, p25: 2700, p75: 3700, p90: 4400 },
      '30': { avg: 3600, median: 3300, p10: 2400, p25: 2900, p75: 4200, p90: 5200 },
      '35': { avg: 4000, median: 3600, p10: 2600, p25: 3100, p75: 4700, p90: 6000 },
      '40': { avg: 4200, median: 3800, p10: 2700, p25: 3200, p75: 5000, p90: 6500 },
      '45': { avg: 4300, median: 3900, p10: 2800, p25: 3300, p75: 5200, p90: 6800 },
      '50': { avg: 4000, median: 3600, p10: 2600, p25: 3100, p75: 4800, p90: 6200 },
      '55': { avg: 3600, median: 3200, p10: 2400, p25: 2800, p75: 4300, p90: 5500 },
      '60': { avg: 3200, median: 2800, p10: 2000, p25: 2500, p75: 3800, p90: 5000 }
    }
  };

  function getAgeGroup(age: number): string {
    if (age < 25) return '20';
    if (age < 30) return '25';
    if (age < 35) return '30';
    if (age < 40) return '35';
    if (age < 45) return '40';
    if (age < 50) return '45';
    if (age < 55) return '50';
    if (age < 60) return '55';
    return '60';
  }

  function calcPercentile(salary: number, stats: typeof salaryStats['all']['20']): number {
    if (salary <= stats.p10) return Math.round((salary / stats.p10) * 10);
    if (salary <= stats.p25) return 10 + Math.round(((salary - stats.p10) / (stats.p25 - stats.p10)) * 15);
    if (salary <= stats.median) return 25 + Math.round(((salary - stats.p25) / (stats.median - stats.p25)) * 25);
    if (salary <= stats.p75) return 50 + Math.round(((salary - stats.median) / (stats.p75 - stats.median)) * 25);
    if (salary <= stats.p90) return 75 + Math.round(((salary - stats.p75) / (stats.p90 - stats.p75)) * 15);
    return Math.min(99, 90 + Math.round(((salary - stats.p90) / stats.p90) * 10));
  }

  form?.addEventListener('submit', e => {
    e.preventDefault();
    const age = parseInt((document.getElementById('age') as HTMLInputElement).value);
    const gender = (document.getElementById('gender') as HTMLSelectElement).value;
    const salary = parseInt(salaryInput.value.replace(/,/g,'')) || 0;

    const ageGroup = getAgeGroup(age);
    const stats = salaryStats[gender][ageGroup];
    const percentile = calcPercentile(salary, stats);

    document.getElementById('result-area')?.classList.remove('hidden');

    // í—¤ë” ìƒ‰ìƒ
    let headerColor, emoji;
    if (percentile >= 90) { headerColor = 'bg-gradient-to-br from-amber-400 to-orange-500'; emoji = 'ğŸ‘‘'; }
    else if (percentile >= 75) { headerColor = 'bg-gradient-to-br from-purple-500 to-pink-500'; emoji = 'ğŸ‰'; }
    else if (percentile >= 50) { headerColor = 'bg-gradient-to-br from-blue-500 to-cyan-500'; emoji = 'ğŸ’ª'; }
    else if (percentile >= 25) { headerColor = 'bg-gradient-to-br from-green-500 to-teal-500'; emoji = 'ğŸ“ˆ'; }
    else { headerColor = 'bg-gradient-to-br from-gray-500 to-slate-600'; emoji = 'ğŸŒ±'; }

    const header = document.getElementById('result-header')!;
    header.className = `${headerColor} rounded-2xl p-8 text-white text-center mb-6`;

    document.getElementById('percentile')!.textContent = `ìƒìœ„ ${100 - percentile}%`;

    let desc;
    if (percentile >= 90) desc = `${emoji} ìµœìƒìœ„ê¶Œ! ë™ë…„ë°° 100ëª… ì¤‘ ${100 - percentile}ë“±`;
    else if (percentile >= 75) desc = `${emoji} ìƒìœ„ê¶Œ! ë™ë…„ë°° 4ëª… ì¤‘ 1ë“±`;
    else if (percentile >= 50) desc = `${emoji} í‰ê·  ì´ìƒ! ë™ë…„ë°° ì ˆë°˜ ì´ìƒë³´ë‹¤ ë†’ìŒ`;
    else if (percentile >= 25) desc = `${emoji} ì„±ì¥ ì¤‘! ì•„ì§ ê°ˆ ê¸¸ì´ ìˆì–´ìš”`;
    else desc = `${emoji} ì‹œì‘ ë‹¨ê³„! ì•ìœ¼ë¡œ ì„±ì¥í•  ì ì¬ë ¥ì´ ìˆì–´ìš”`;

    document.getElementById('percentile-desc')!.textContent = desc;

    document.getElementById('r-avg')!.textContent = stats.avg.toLocaleString() + 'ë§Œì›';

    const diff = salary - stats.avg;
    const diffEl = document.getElementById('r-diff')!;
    if (diff >= 0) {
      diffEl.textContent = '+' + diff.toLocaleString() + 'ë§Œì›';
      diffEl.className = 'text-xl font-bold text-green-500';
    } else {
      diffEl.textContent = diff.toLocaleString() + 'ë§Œì›';
      diffEl.className = 'text-xl font-bold text-red-500';
    }

    document.getElementById('r-below')!.textContent = percentile + '%';

    // ë¶„í¬ ë°”
    (document.getElementById('distribution-bar') as HTMLElement).style.width = percentile + '%';
    (document.getElementById('position-marker') as HTMLElement).style.left = percentile + '%';

    // ë¹„êµ ë¶„ì„
    const comparisons = document.getElementById('comparisons')!;
    comparisons.innerHTML = `
      <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">í•˜ìœ„ 10% ê¸°ì¤€</span><span class="font-medium">${stats.p10.toLocaleString()}ë§Œì›</span></div>
      <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">í•˜ìœ„ 25% ê¸°ì¤€</span><span class="font-medium">${stats.p25.toLocaleString()}ë§Œì›</span></div>
      <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì¤‘ìœ„ê°’ (50%)</span><span class="font-medium">${stats.median.toLocaleString()}ë§Œì›</span></div>
      <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ìƒìœ„ 25% ê¸°ì¤€</span><span class="font-medium">${stats.p75.toLocaleString()}ë§Œì›</span></div>
      <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ìƒìœ„ 10% ê¸°ì¤€</span><span class="font-medium">${stats.p90.toLocaleString()}ë§Œì›</span></div>
    `;

    // ì¡°ì–¸
    let adviceTitle, adviceText, adviceBg;
    if (percentile >= 90) {
      adviceTitle = 'ğŸ† ìµœìƒìœ„ê¶Œì…ë‹ˆë‹¤!';
      adviceText = 'ë‹¹ì‹ ì€ ë™ë…„ë°° ì¤‘ ìµœìƒìœ„ ì†Œë“ìì…ë‹ˆë‹¤. ì´ ìœ„ì¹˜ë¥¼ ìœ ì§€í•˜ë©´ì„œ ìì‚° ê´€ë¦¬ì™€ íˆ¬ìì— ì§‘ì¤‘í•´ë³´ì„¸ìš”. ì„¸ê¸ˆ ìµœì í™”ì™€ ì€í‡´ ê³„íšë„ ì¤‘ìš”í•©ë‹ˆë‹¤.';
      adviceBg = 'bg-amber-50 dark:bg-amber-900/20 text-amber-800 dark:text-amber-200';
    } else if (percentile >= 75) {
      adviceTitle = 'ğŸ¯ ìƒìœ„ê¶Œì…ë‹ˆë‹¤!';
      adviceText = 'í‰ê· ì„ í¬ê²Œ ìƒíšŒí•˜ëŠ” ì—°ë´‰ì…ë‹ˆë‹¤. ì €ì¶•ë¥ ì„ ë†’ì´ê³  íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë‹¤ì–‘í™”í•´ë³´ì„¸ìš”. ì´ì§ì´ë‚˜ ì§ë¬´ ì „í™˜ìœ¼ë¡œ ë” ë†’ì€ ê³³ì„ ë…¸ë ¤ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
      adviceBg = 'bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-200';
    } else if (percentile >= 50) {
      adviceTitle = 'ğŸ’¼ í‰ê·  ì´ìƒì…ë‹ˆë‹¤!';
      adviceText = 'ë™ë…„ë°° í‰ê· ì„ ë„˜ì–´ì„  ì—°ë´‰ì…ë‹ˆë‹¤. ìê²©ì¦ ì·¨ë“, ì´ì§, ë˜ëŠ” ë¶€ì—…ì„ í†µí•´ ë” ë†’ì€ ìˆ˜ì…ì„ ëª©í‘œë¡œ í•´ë³´ì„¸ìš”. ê¾¸ì¤€í•œ ìê¸°ê³„ë°œì´ ì¤‘ìš”í•©ë‹ˆë‹¤.';
      adviceBg = 'bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200';
    } else if (percentile >= 25) {
      adviceTitle = 'ğŸ“ˆ ì„±ì¥ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤!';
      adviceText = 'ì•„ì§ í‰ê· ì— ë„ë‹¬í•˜ì§€ ëª»í–ˆì§€ë§Œ ì¶©ë¶„íˆ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§ë¬´ ì—­ëŸ‰ ê°•í™”, ì´ì§, ë˜ëŠ” ì—…ê³„ ë³€ê²½ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.';
      adviceBg = 'bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200';
    } else {
      adviceTitle = 'ğŸŒ± ì‹œì‘ì ì…ë‹ˆë‹¤!';
      adviceText = 'í˜„ì¬ ì—°ë´‰ì´ ë‚®ë”ë¼ë„ ë‚™ë‹´í•˜ì§€ ë§ˆì„¸ìš”. ê²½ë ¥ ì´ˆê¸°ì´ê±°ë‚˜ ìƒˆë¡œìš´ ë¶„ì•¼ì— ë„ì „í•œ ê²½ìš°ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¥ê¸°ì ì¸ ì»¤ë¦¬ì–´ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.';
      adviceBg = 'bg-gray-50 dark:bg-gray-900/20 text-gray-800 dark:text-gray-200';
    }

    const adviceBox = document.getElementById('advice-box')!;
    adviceBox.className = `rounded-xl p-5 ${adviceBg}`;
    document.getElementById('advice-title')!.textContent = adviceTitle;
    document.getElementById('advice-text')!.textContent = adviceText;

    // SEO ì½˜í…ì¸  ë™ì  ìƒì„±
    generateSeoContent(age, gender, salary, percentile, stats);
  });

  function generateSeoContent(age: number, gender: string, salary: number, percentile: number, stats: any) {
    const genderText = gender === 'male' ? 'ë‚¨ì„±' : gender === 'female' ? 'ì—¬ì„±' : 'ì „ì²´';
    const ageGroup = age < 30 ? '20ëŒ€' : age < 40 ? '30ëŒ€' : age < 50 ? '40ëŒ€' : '50ëŒ€ ì´ìƒ';
    const topPercent = 100 - percentile;

    // ê²°ê³¼ ìš”ì•½
    let summaryText, statusEmoji;
    if (percentile >= 90) {
      summaryText = `${age}ì„¸ ${genderText} ê¸°ì¤€, ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ì€ ìƒìœ„ ${topPercent}%ë¡œ ìµœìƒìœ„ê¶Œì…ë‹ˆë‹¤`;
      statusEmoji = 'ğŸ‘‘';
    } else if (percentile >= 75) {
      summaryText = `${age}ì„¸ ${genderText} ê¸°ì¤€, ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ì€ ìƒìœ„ ${topPercent}%ë¡œ ìƒìœ„ê¶Œì— ì†í•©ë‹ˆë‹¤`;
      statusEmoji = 'ğŸ‰';
    } else if (percentile >= 50) {
      summaryText = `${age}ì„¸ ${genderText} ê¸°ì¤€, ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ì€ í‰ê·  ì´ìƒì…ë‹ˆë‹¤`;
      statusEmoji = 'ğŸ’ª';
    } else if (percentile >= 25) {
      summaryText = `${age}ì„¸ ${genderText} ê¸°ì¤€, ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ì€ í‰ê·  ì´í•˜ì§€ë§Œ ì„±ì¥ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤`;
      statusEmoji = 'ğŸ“ˆ';
    } else {
      summaryText = `${age}ì„¸ ${genderText} ê¸°ì¤€, ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ì€ í•˜ìœ„ê¶Œì´ì§€ë§Œ ì‹œì‘ì ì…ë‹ˆë‹¤`;
      statusEmoji = 'ğŸŒ±';
    }
    document.getElementById('seo-summary')!.textContent = `${statusEmoji} ê²°ê³¼ ìš”ì•½: ${summaryText}`;

    // ì˜ë¯¸ ì„¤ëª…
    const diff = salary - stats.avg;
    const diffText = diff >= 0 ? `${diff.toLocaleString()}ë§Œì› ë§ìŠµë‹ˆë‹¤` : `${Math.abs(diff).toLocaleString()}ë§Œì› ì ìŠµë‹ˆë‹¤`;
    const meaningText = `ê·€í•˜ì˜ ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ì€ ${age}ì„¸ ${genderText} ê¸°ì¤€ ìƒìœ„ ${topPercent}%ì— í•´ë‹¹í•©ë‹ˆë‹¤. ` +
      `ì´ëŠ” ê°™ì€ ë‚˜ì´ëŒ€ 100ëª… ì¤‘ ${topPercent}ë²ˆì§¸ë¡œ ë†’ì€ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ` +
      `ë™ë…„ë°° í‰ê·  ì—°ë´‰ ${stats.avg.toLocaleString()}ë§Œì›ê³¼ ë¹„êµí•˜ë©´ ${diffText}. ` +
      `ì¤‘ìœ„ê°’(ìƒìœ„ 50% ê¸°ì¤€) ${stats.median.toLocaleString()}ë§Œì›ê³¼ ë¹„êµí•˜ë©´ ` +
      `${salary >= stats.median ? 'ì¤‘ìœ„ê°’ì„ ìƒíšŒí•˜ëŠ”' : 'ì¤‘ìœ„ê°’ì— ë¯¸ì¹˜ì§€ ëª»í•˜ëŠ”'} ìˆ˜ì¤€ì…ë‹ˆë‹¤. ` +
      `${ageGroup} ${genderText}ì˜ ìƒìœ„ 10% ê¸°ì¤€ì ì€ ${stats.p90.toLocaleString()}ë§Œì›, ` +
      `ìƒìœ„ 25% ê¸°ì¤€ì ì€ ${stats.p75.toLocaleString()}ë§Œì›ì…ë‹ˆë‹¤. ` +
      `ì°¸ê³ ë¡œ ì´ í†µê³„ëŠ” 2026ë…„ í†µê³„ì²­ ë° êµ­ì„¸ì²­ ìë£Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ì •í•œ ê²ƒì…ë‹ˆë‹¤.`;
    document.getElementById('seo-meaning')!.textContent = meaningText;

    // ì í•©í•œ ëŒ€ìƒ (ìˆœìœ„ì— ë”°ë¥¸ ì¡°ì–¸)
    let suitableText;
    if (percentile >= 80) {
      suitableText = `í˜„ì¬ ì—°ë´‰ ìˆ˜ì¤€ì„ ìœ ì§€í•˜ë©´ì„œ ìì‚° ì¦ì‹ì— ì§‘ì¤‘í•  ë¶„, íˆ¬ìë‚˜ ë¶€ë™ì‚° ë“± ì¬í…Œí¬ì— ê´€ì‹¬ ìˆëŠ” ë¶„, ` +
        `ì€í‡´ ê³„íšì„ êµ¬ì²´ì ìœ¼ë¡œ ìˆ˜ë¦½í•˜ë ¤ëŠ” ë¶„, ìë…€ êµìœ¡ë¹„ë‚˜ ë…¸í›„ ìê¸ˆì„ ë¯¸ë¦¬ ì¤€ë¹„í•˜ë ¤ëŠ” ë¶„, ` +
        `ì„¸ê¸ˆ ì ˆì•½ì„ ìœ„í•œ ì—°ê¸ˆ/í€ë“œ ì „ëµì´ í•„ìš”í•œ ë¶„ì—ê²Œ ì´ ë¶„ì„ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.`;
    } else if (percentile >= 50) {
      suitableText = `ì—°ë´‰ í˜‘ìƒì´ë‚˜ ì´ì§ì„ ê³ ë ¤í•˜ê³  ìˆëŠ” ë¶„, ìì‹ ì˜ ì‹œì¥ ê°€ì¹˜ë¥¼ ê°ê´€ì ìœ¼ë¡œ íŒŒì•…í•˜ê³  ì‹¶ì€ ë¶„, ` +
        `ì»¤ë¦¬ì–´ ê°œë°œ ë°©í–¥ì„ ê³ ë¯¼í•˜ëŠ” ë¶„, ë™ì¢… ì—…ê³„ ëŒ€ë¹„ ë‚´ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ë ¤ëŠ” ë¶„, ` +
        `ìê¸°ê³„ë°œì´ë‚˜ ìê²©ì¦ ì·¨ë“ì„ í†µí•´ ì—°ë´‰ ìƒìŠ¹ì„ ëª©í‘œë¡œ í•˜ëŠ” ë¶„ì—ê²Œ ìœ ìš©í•œ ê¸°ì¤€ì ì´ ë©ë‹ˆë‹¤.`;
    } else {
      suitableText = `ê²½ë ¥ ì „í™˜ì´ë‚˜ ì´ì§ì„ ì‹¬ê°í•˜ê²Œ ê³ ë ¤í•˜ëŠ” ë¶„, í˜„ì¬ ì—…ê³„/ì§ë¬´ì˜ ì—°ë´‰ ìˆ˜ì¤€ì„ ê°ê´€ì ìœ¼ë¡œ í™•ì¸í•˜ë ¤ëŠ” ë¶„, ` +
        `ë¶€ì—…ì´ë‚˜ íˆ¬ì¡ì„ í†µí•´ ì¶”ê°€ ìˆ˜ì…ì„ ê³„íší•˜ëŠ” ë¶„, ì·¨ì—… ì¤€ë¹„ìƒìœ¼ë¡œ ëª©í‘œ ì—°ë´‰ì„ ì„¤ì •í•˜ë ¤ëŠ” ë¶„, ` +
        `ì—°ë´‰ ìƒìŠ¹ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì•¡ì…˜ í”Œëœì´ í•„ìš”í•œ ë¶„ì—ê²Œ í˜„ì‹¤ì ì¸ ê°€ì´ë“œê°€ ë©ë‹ˆë‹¤.`;
    }
    document.getElementById('seo-suitable')!.textContent = suitableText;

    // ì£¼ì˜ì‚¬í•­
    let cautionText = `ì—°ë´‰ ìˆœìœ„ë¥¼ í•´ì„í•  ë•Œ ëª‡ ê°€ì§€ ì£¼ì˜í•  ì ì´ ìˆìŠµë‹ˆë‹¤. ì²«ì§¸, ì´ í†µê³„ëŠ” ì„¸ì „ ì—°ë´‰ ê¸°ì¤€ì´ë©°, ` +
      `ì‹¤ìˆ˜ë ¹ì•¡ì€ ì„¸ê¸ˆê³¼ 4ëŒ€ ë³´í—˜ë£Œ ê³µì œ í›„ ì•½ 70~85% ìˆ˜ì¤€ì…ë‹ˆë‹¤. ë‘˜ì§¸, ì—…ì¢…/ì§êµ°ì— ë”°ë¼ ì—°ë´‰ ë¶„í¬ê°€ í¬ê²Œ ë‹¤ë¦…ë‹ˆë‹¤. ` +
      `IT, ê¸ˆìœµì—…ì€ í‰ê· ë³´ë‹¤ 20~50% ë†’ê³ , ì„œë¹„ìŠ¤/ìœ í†µì—…ì€ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ì€ í¸ì…ë‹ˆë‹¤. `;
    if (percentile >= 75) {
      cautionText += `ì…‹ì§¸, ìƒìœ„ê¶Œ ì—°ë´‰ìì˜ ê²½ìš° ì„±ê³¼ê¸‰, ìŠ¤í†¡ì˜µì…˜ ë“± ë³€ë™ ê¸‰ì—¬ ë¹„ì¤‘ì´ ë†’ì•„ ` +
        `ê²½ê¸° ë³€ë™ì— ë”°ë¥¸ ì†Œë“ ë³€í™”ê°€ í´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ˆì •ì ì¸ ì¬ì • ê³„íšì„ ìœ„í•´ ê¸°ë³¸ê¸‰ ê¸°ì¤€ìœ¼ë¡œ ì§€ì¶œì„ ê³„íší•˜ì„¸ìš”. ` +
        `ë˜í•œ ë†’ì€ ì—°ë´‰ì€ ê·¸ë§Œí¼ ë†’ì€ ì—…ë¬´ ê°•ë„ì™€ ì±…ì„ì„ ìˆ˜ë°˜í•˜ë¯€ë¡œ ì›Œë¼ë°¸ë„ í•¨ê»˜ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.`;
    } else {
      cautionText += `ì…‹ì§¸, ì—°ë´‰ì´ ë‚®ë‹¤ê³  ë‚™ë‹´í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ê²½ë ¥ ì´ˆê¸°ì´ê±°ë‚˜ ìƒˆë¡œìš´ ë¶„ì•¼ë¡œ ì „í™˜í•œ ê²½ìš° ` +
        `ì¼ì‹œì ìœ¼ë¡œ ë‚®ì„ ìˆ˜ ìˆìœ¼ë©°, ìê²©ì¦ ì·¨ë“, ì´ì§, ì§ë¬´ ì „í™˜ ë“±ì„ í†µí•´ ë‹¨ê¸°ê°„ì— í¬ê²Œ ìƒìŠ¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ` +
        `ì¥ê¸°ì ì¸ ì»¤ë¦¬ì–´ ê´€ì ì—ì„œ ì„±ì¥ ê°€ëŠ¥ì„±ê³¼ ì›Œë¼ë°¸ë„ ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.`;
    }
    document.getElementById('seo-caution')!.textContent = cautionText;

    // FAQ ìƒì„±
    const faqs = [
      {
        q: 'ì´ ì—°ë´‰ ìˆœìœ„ í†µê³„ëŠ” ì–´ë””ì„œ ê°€ì ¸ì˜¨ ê±´ê°€ìš”?',
        a: 'ë³¸ ê³„ì‚°ê¸°ëŠ” 2026ë…„ í†µê³„ì²­ ê°€ê³„ë™í–¥ì¡°ì‚¬, êµ­ì„¸ì²­ ê·¼ë¡œì†Œë“ ì²œë¶„ìœ„ ìë£Œ, ê³ ìš©ë…¸ë™ë¶€ ì„ê¸ˆêµ¬ì¡° ê¸°ë³¸í†µê³„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—°ë ¹ëŒ€ë³„, ì„±ë³„ ì—°ë´‰ ë¶„í¬ë¥¼ ì¶”ì •í•œ ê²ƒì…ë‹ˆë‹¤. ë‹¤ë§Œ ìì˜ì—…ì, í”„ë¦¬ëœì„œ ì†Œë“ì€ í¬í•¨ë˜ì§€ ì•Šì•˜ìœ¼ë©°, ëŒ€ê¸°ì—…ê³¼ ì¤‘ì†Œê¸°ì—… ê°„ ê²©ì°¨ë„ í‰ê· í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        q: 'ì„¸ì „ ì—°ë´‰ê³¼ ì‹¤ìˆ˜ë ¹ì•¡ì˜ ì°¨ì´ëŠ” ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?',
        a: `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì› ê¸°ì¤€, ì‹¤ìˆ˜ë ¹ì•¡ì€ ì•½ ${Math.round(salary * 0.78).toLocaleString()}~${Math.round(salary * 0.85).toLocaleString()}ë§Œì›(ì›” ${Math.round(salary * 0.8 / 12).toLocaleString()}ë§Œì›) ìˆ˜ì¤€ì…ë‹ˆë‹¤. ì†Œë“ì„¸, ì£¼ë¯¼ì„¸, êµ­ë¯¼ì—°ê¸ˆ, ê±´ê°•ë³´í—˜, ê³ ìš©ë³´í—˜ ë“±ì´ ê³µì œë˜ë©°, ë¶€ì–‘ê°€ì¡± ìˆ˜ì™€ ë¹„ê³¼ì„¸ í•­ëª©ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.`
      },
      {
        q: 'ì—°ë´‰ ìƒìœ„ 10%ê°€ ë˜ë ¤ë©´ ì–¼ë§ˆê°€ í•„ìš”í•œê°€ìš”?',
        a: `${age}ì„¸ ${genderText} ê¸°ì¤€, ìƒìœ„ 10%ì— ì§„ì…í•˜ë ¤ë©´ ì—°ë´‰ ${stats.p90.toLocaleString()}ë§Œì› ì´ìƒì´ í•„ìš”í•©ë‹ˆë‹¤. í˜„ì¬ ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ê³¼ì˜ ì°¨ì´ëŠ” ${(stats.p90 - salary).toLocaleString()}ë§Œì›ì…ë‹ˆë‹¤. ì´ ê²©ì°¨ë¥¼ ì¢íˆë ¤ë©´ ì´ì§, ìŠ¹ì§„, ë¶€ì„œ ì´ë™, ë˜ëŠ” ë¶€ì—… ë“±ì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
      },
      {
        q: 'ê°™ì€ ë‚˜ì´ëŒ€ í‰ê·  ì—°ë´‰ì´ ì™œ ë‹¤ë¥´ê²Œ ë‚˜ì˜¤ë‚˜ìš”?',
        a: 'ì—°ë´‰ í†µê³„ëŠ” ì¡°ì‚¬ ê¸°ê´€, í‘œë³¸, ì¸¡ì • ì‹œì ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ë³¸ ê³„ì‚°ê¸°ëŠ” ì „ì²´ ê·¼ë¡œì í‰ê· ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì·¨ì—…í¬í„¸ì˜ ì—°ë´‰ ì •ë³´ëŠ” ì‘ë‹µì ê¸°ë°˜ìœ¼ë¡œ ëŒ€ê¸°ì—…/ê³ ì†Œë“ì ë¹„ì¤‘ì´ ë†’ì•„ í‰ê· ì´ ë†’ê²Œ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ìë£Œë¥¼ ì°¸ê³ í•˜ì—¬ íŒë‹¨í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.'
      }
    ];

    const faqContainer = document.getElementById('faq-content')!;
    faqContainer.innerHTML = faqs.map(faq => `
      <details class="group">
        <summary class="flex justify-between items-center cursor-pointer list-none p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600">
          <span class="font-medium text-gray-900 dark:text-white">${faq.q}</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <p class="mt-2 px-3 text-gray-600 dark:text-gray-400 text-sm">${faq.a}</p>
      </details>
    `).join('');

    // JSON-LD FAQ Schema
    const faqSchema = {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqs.map(faq => ({
        "@type": "Question",
        "name": faq.q,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": faq.a
        }
      }))
    };

    let schemaScript = document.getElementById('faq-schema');
    if (!schemaScript) {
      schemaScript = document.createElement('script');
      schemaScript.id = 'faq-schema';
      schemaScript.type = 'application/ld+json';
      document.head.appendChild(schemaScript);
    }
    schemaScript.textContent = JSON.stringify(faqSchema);
  }
</script>
