---
import Layout from '../../../layouts/Layout.astro';
import AdBanner from '../../../components/AdBanner.astro';
import ToolSeoContent from '../../../components/ToolSeoContent.astro';
import { getTool, generateToolBreadcrumbSchema, generateToolHowToSchema, calculatorSteps, getToolStepType } from '../../../utils/tools';

const lang = 'ko';
const tool = getTool('mortgage-comparison', lang);
const siteUrl = 'https://judysylph.com';
const stepType = getToolStepType('mortgage-comparison');
const steps = calculatorSteps[lang][stepType];

const webAppSchema = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": tool?.title,
  "description": tool?.description,
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "All",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
};

const breadcrumbSchema = tool ? generateToolBreadcrumbSchema(tool, lang, siteUrl) : null;
const howToSchema = tool ? generateToolHowToSchema(tool, lang, siteUrl, steps) : null;
const jsonLd = [webAppSchema, breadcrumbSchema, howToSchema].filter(Boolean);
---

<Layout title={`${tool?.title} | JudySylph`} description={tool?.description} jsonLd={jsonLd}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <div class="text-5xl mb-4">{tool?.emoji}</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">{tool?.title}</h1>
      <p class="text-gray-600 dark:text-gray-400">{tool?.description}</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
      <form id="calc-form" class="space-y-6">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ëŒ€ì¶œ ê¸ˆì•¡</label>
            <input type="text" id="loanAmount" placeholder="30,000" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
            <p class="text-xs text-gray-500 mt-1">ë§Œì›</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì—° ì´ììœ¨</label>
            <input type="number" id="interestRate" placeholder="4.5" step="0.1" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
            <p class="text-xs text-gray-500 mt-1">%</p>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ëŒ€ì¶œ ê¸°ê°„</label>
            <select id="loanPeriod" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option value="120">10ë…„ (120ê°œì›”)</option>
              <option value="180">15ë…„ (180ê°œì›”)</option>
              <option value="240">20ë…„ (240ê°œì›”)</option>
              <option value="300">25ë…„ (300ê°œì›”)</option>
              <option value="360" selected>30ë…„ (360ê°œì›”)</option>
              <option value="420">35ë…„ (420ê°œì›”)</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ê±°ì¹˜ ê¸°ê°„</label>
            <select id="gracePeriod" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option value="0" selected>ì—†ìŒ</option>
              <option value="12">1ë…„</option>
              <option value="24">2ë…„</option>
              <option value="36">3ë…„</option>
              <option value="60">5ë…„</option>
            </select>
          </div>
        </div>

        <button type="submit" class="w-full px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700">ìƒí™˜ ë°©ì‹ ë¹„êµí•˜ê¸°</button>
      </form>

      <div id="result-area" class="mt-8 hidden">
        <div class="grid grid-cols-3 gap-4 mb-6">
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border-2 border-transparent" id="card-equal">
            <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-3 text-center">ğŸ“Š ì›ë¦¬ê¸ˆê· ë“±</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ˆê¸° ì›”ìƒí™˜</span><span id="eq-first" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ì´ì</span><span id="eq-interest" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ìƒí™˜ì•¡</span><span id="eq-total" class="font-medium">-</span></div>
            </div>
            <div id="eq-recommend" class="mt-3 text-center text-xs font-medium text-blue-600 dark:text-blue-400 hidden">âœ“ ì¶”ì²œ</div>
          </div>

          <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border-2 border-transparent" id="card-principal">
            <h4 class="font-bold text-green-800 dark:text-green-200 mb-3 text-center">ğŸ“‰ ì›ê¸ˆê· ë“±</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ˆê¸° ì›”ìƒí™˜</span><span id="pr-first" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ì´ì</span><span id="pr-interest" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ìƒí™˜ì•¡</span><span id="pr-total" class="font-medium">-</span></div>
            </div>
            <div id="pr-recommend" class="mt-3 text-center text-xs font-medium text-green-600 dark:text-green-400 hidden">âœ“ ì¶”ì²œ</div>
          </div>

          <div class="bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 border-2 border-transparent" id="card-bullet">
            <h4 class="font-bold text-purple-800 dark:text-purple-200 mb-3 text-center">ğŸ’° ë§Œê¸°ì¼ì‹œ</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ì´ì</span><span id="bu-first" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ì´ì</span><span id="bu-interest" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ìƒí™˜ì•¡</span><span id="bu-total" class="font-medium">-</span></div>
            </div>
            <div id="bu-recommend" class="mt-3 text-center text-xs font-medium text-purple-600 dark:text-purple-400 hidden">âœ“ ì¶”ì²œ</div>
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-4">ğŸ“Š ì´ì ì ˆê° ë¹„êµ</h3>
          <div class="space-y-3">
            <div class="flex items-center gap-3">
              <span class="text-gray-600 dark:text-gray-400 w-24">ì›ë¦¬ê¸ˆê· ë“±</span>
              <div class="flex-1 bg-gray-200 dark:bg-gray-600 rounded-full h-6 relative">
                <div id="bar-equal" class="bg-blue-500 h-6 rounded-full"></div>
                <span id="label-equal" class="absolute right-2 top-0.5 text-xs font-medium text-white"></span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-gray-600 dark:text-gray-400 w-24">ì›ê¸ˆê· ë“±</span>
              <div class="flex-1 bg-gray-200 dark:bg-gray-600 rounded-full h-6 relative">
                <div id="bar-principal" class="bg-green-500 h-6 rounded-full"></div>
                <span id="label-principal" class="absolute right-2 top-0.5 text-xs font-medium text-white"></span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-gray-600 dark:text-gray-400 w-24">ë§Œê¸°ì¼ì‹œ</span>
              <div class="flex-1 bg-gray-200 dark:bg-gray-600 rounded-full h-6 relative">
                <div id="bar-bullet" class="bg-purple-500 h-6 rounded-full"></div>
                <span id="label-bullet" class="absolute right-2 top-0.5 text-xs font-medium text-white"></span>
              </div>
            </div>
          </div>
          <p class="mt-4 text-sm text-gray-600 dark:text-gray-400">
            ì›ê¸ˆê· ë“±ì´ ì›ë¦¬ê¸ˆê· ë“±ë³´ë‹¤ <span id="saving-amount" class="font-bold text-green-600">-</span> ì´ì ì ˆê°
          </p>
        </div>

        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-3">ğŸ’¡ ìƒí™˜ ë°©ì‹ ì„ íƒ ê°€ì´ë“œ</h3>
          <div id="recommendation" class="text-sm text-gray-700 dark:text-gray-300"></div>
        </div>

        <!-- SEO Content -->
        <div id="seo-content" class="mt-8 space-y-6">
          <h2 id="seo-summary" class="text-2xl font-bold text-gray-900 dark:text-white"></h2>
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ“Œ ì´ ê²°ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ</h3>
            <p id="seo-meaning" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <!-- AD_SLOT: middle-content -->
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ‘¤ ì´ëŸ° ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤</h3>
            <p id="seo-suitable" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì </h3>
            <p id="seo-caution" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <!-- AD_SLOT: before-faq -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
            <div id="faq-content" class="space-y-4"></div>
          </div>
          <div class="bg-primary-50 dark:bg-primary-900/20 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-3">ğŸ”— ê´€ë ¨ ê³„ì‚°ê¸°</h3>
            <div class="flex flex-wrap gap-2">
              <a href="/ko/tools/mortgage-calculator" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ¦ ì£¼íƒë‹´ë³´ëŒ€ì¶œ ê³„ì‚°ê¸°</a>
              <a href="/ko/tools/loan-refinance" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ”„ ëŒ€ì¶œ ê°ˆì•„íƒ€ê¸° ê³„ì‚°ê¸°</a>
              <a href="/ko/tools/apartment-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ¢ ë‚´ ì—°ë´‰ìœ¼ë¡œ ê°€ëŠ¥í•œ ì•„íŒŒíŠ¸</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <AdBanner className="mt-8" />

    <!-- SEO Content -->
    <ToolSeoContent
      title={tool?.title || ''}
      description={tool?.description || ''}
      emoji={tool?.emoji || ''}
      category={tool?.category || ''}
      lang={lang}
      slug={tool?.slug || ''}
    />

    <div class="mt-8 text-center"><a href="/ko/tools" class="text-primary-600 dark:text-primary-400 hover:underline">â† ë„êµ¬ ëª©ë¡</a></div>
  </div>
</Layout>

<script>
  const form = document.getElementById('calc-form') as HTMLFormElement;
  const loanInput = document.getElementById('loanAmount') as HTMLInputElement;

  loanInput?.addEventListener('input', e => {
    const v = (e.target as HTMLInputElement).value.replace(/\D/g,'');
    (e.target as HTMLInputElement).value = Number(v).toLocaleString('ko-KR');
  });

  form?.addEventListener('submit', e => {
    e.preventDefault();

    const loanAmount = parseInt(loanInput.value.replace(/,/g,'')) * 10000;
    const rate = parseFloat((document.getElementById('interestRate') as HTMLInputElement).value) / 100;
    const totalMonths = parseInt((document.getElementById('loanPeriod') as HTMLSelectElement).value);
    const graceMonths = parseInt((document.getElementById('gracePeriod') as HTMLSelectElement).value);
    const repayMonths = totalMonths - graceMonths;
    const monthlyRate = rate / 12;

    // ì›ë¦¬ê¸ˆê· ë“± (Equal Payment)
    let eqMonthly = 0, eqTotalInterest = 0;
    if (graceMonths > 0) {
      eqTotalInterest += loanAmount * monthlyRate * graceMonths;
    }
    eqMonthly = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, repayMonths) / (Math.pow(1 + monthlyRate, repayMonths) - 1);
    let balance = loanAmount;
    for (let i = 0; i < repayMonths; i++) {
      const interest = balance * monthlyRate;
      eqTotalInterest += interest;
      balance -= (eqMonthly - interest);
    }
    const eqFirstPayment = graceMonths > 0 ? loanAmount * monthlyRate : eqMonthly;
    const eqTotal = loanAmount + eqTotalInterest;

    // ì›ê¸ˆê· ë“± (Equal Principal)
    const principalPerMonth = loanAmount / repayMonths;
    let prTotalInterest = 0;
    if (graceMonths > 0) {
      prTotalInterest += loanAmount * monthlyRate * graceMonths;
    }
    let prBalance = loanAmount;
    for (let i = 0; i < repayMonths; i++) {
      prTotalInterest += prBalance * monthlyRate;
      prBalance -= principalPerMonth;
    }
    const prFirstPayment = graceMonths > 0 ? loanAmount * monthlyRate : principalPerMonth + loanAmount * monthlyRate;
    const prTotal = loanAmount + prTotalInterest;

    // ë§Œê¸°ì¼ì‹œ (Bullet)
    const buMonthlyInterest = loanAmount * monthlyRate;
    const buTotalInterest = buMonthlyInterest * totalMonths;
    const buTotal = loanAmount + buTotalInterest;

    document.getElementById('result-area')?.classList.remove('hidden');

    // Display results
    document.getElementById('eq-first')!.textContent = Math.round(eqFirstPayment).toLocaleString() + 'ì›';
    document.getElementById('eq-interest')!.textContent = Math.round(eqTotalInterest / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('eq-total')!.textContent = Math.round(eqTotal / 10000).toLocaleString() + 'ë§Œì›';

    document.getElementById('pr-first')!.textContent = Math.round(prFirstPayment).toLocaleString() + 'ì›';
    document.getElementById('pr-interest')!.textContent = Math.round(prTotalInterest / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('pr-total')!.textContent = Math.round(prTotal / 10000).toLocaleString() + 'ë§Œì›';

    document.getElementById('bu-first')!.textContent = Math.round(buMonthlyInterest).toLocaleString() + 'ì›';
    document.getElementById('bu-interest')!.textContent = Math.round(buTotalInterest / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('bu-total')!.textContent = Math.round(buTotal / 10000).toLocaleString() + 'ë§Œì›';

    // Interest comparison bars
    const maxInterest = buTotalInterest;
    (document.getElementById('bar-equal') as HTMLElement).style.width = (eqTotalInterest / maxInterest * 100) + '%';
    (document.getElementById('bar-principal') as HTMLElement).style.width = (prTotalInterest / maxInterest * 100) + '%';
    (document.getElementById('bar-bullet') as HTMLElement).style.width = '100%';

    document.getElementById('label-equal')!.textContent = Math.round(eqTotalInterest / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('label-principal')!.textContent = Math.round(prTotalInterest / 10000).toLocaleString() + 'ë§Œì›';
    document.getElementById('label-bullet')!.textContent = Math.round(buTotalInterest / 10000).toLocaleString() + 'ë§Œì›';

    const saving = eqTotalInterest - prTotalInterest;
    document.getElementById('saving-amount')!.textContent = Math.round(saving / 10000).toLocaleString() + 'ë§Œì›';

    // Recommendation
    const cards = ['card-equal', 'card-principal', 'card-bullet'];
    const recommends = ['eq-recommend', 'pr-recommend', 'bu-recommend'];
    cards.forEach(id => document.getElementById(id)!.className = document.getElementById(id)!.className.replace('border-primary-500', 'border-transparent'));
    recommends.forEach(id => document.getElementById(id)!.classList.add('hidden'));

    let recommendText = '';
    const loanMan = loanAmount / 10000;
    const years = totalMonths / 12;

    if (prFirstPayment > eqMonthly * 1.3) {
      document.getElementById('card-equal')!.classList.add('border-primary-500');
      document.getElementById('eq-recommend')!.classList.remove('hidden');
      recommendText = `<strong>ì›ë¦¬ê¸ˆê· ë“±</strong>ì„ ì¶”ì²œí•©ë‹ˆë‹¤. ì›ê¸ˆê· ë“±ì˜ ì´ˆê¸° ìƒí™˜ê¸ˆ(${Math.round(prFirstPayment).toLocaleString()}ì›)ì´ ì›ë¦¬ê¸ˆê· ë“±(${Math.round(eqMonthly).toLocaleString()}ì›)ë³´ë‹¤ 30% ì´ìƒ ë†’ì•„ ì´ˆê¸° ë¶€ë‹´ì´ í´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§¤ì›” ì¼ì •í•œ ê¸ˆì•¡ì„ ìƒí™˜í•˜ë©° ì¥ê¸°ì ìœ¼ë¡œ ì•ˆì •ì ì¸ ì¬ì • ê³„íšì„ ì„¸ìš°ê³  ì‹¶ë‹¤ë©´ ì›ë¦¬ê¸ˆê· ë“±ì´ ì í•©í•©ë‹ˆë‹¤.`;
    } else {
      document.getElementById('card-principal')!.classList.add('border-primary-500');
      document.getElementById('pr-recommend')!.classList.remove('hidden');
      recommendText = `<strong>ì›ê¸ˆê· ë“±</strong>ì„ ì¶”ì²œí•©ë‹ˆë‹¤. ì›ë¦¬ê¸ˆê· ë“± ëŒ€ë¹„ ${Math.round(saving / 10000).toLocaleString()}ë§Œì›ì˜ ì´ìë¥¼ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸° ìƒí™˜ê¸ˆì´ ë‹¤ì†Œ ë†’ì§€ë§Œ(${Math.round(prFirstPayment).toLocaleString()}ì›), ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ìƒí™˜ ë¶€ë‹´ì´ ì¤„ì–´ë“¤ì–´ ì†Œë“ ì¦ê°€ê°€ ì˜ˆìƒë˜ëŠ” ë¶„ì—ê²Œ ìœ ë¦¬í•©ë‹ˆë‹¤.`;
    }

    document.getElementById('recommendation')!.innerHTML = recommendText;

    // SEO
    generateSeoContent(loanMan, rate * 100, years, eqTotalInterest, prTotalInterest, buTotalInterest, eqMonthly, prFirstPayment, saving);
  });

  function generateSeoContent(loanMan: number, rate: number, years: number, eqInterest: number, prInterest: number, buInterest: number, eqMonthly: number, prFirst: number, saving: number) {
    // Summary
    const summaryText = `ëŒ€ì¶œ ${loanMan.toLocaleString()}ë§Œì›, ê¸ˆë¦¬ ${rate}%, ${years}ë…„ ìƒí™˜ ì‹œ ì›ê¸ˆê· ë“±ì´ ì›ë¦¬ê¸ˆê· ë“±ë³´ë‹¤ ${Math.round(saving/10000).toLocaleString()}ë§Œì› ì´ì ì ˆê°`;
    document.getElementById('seo-summary')!.textContent = `ğŸ“‹ ê²°ê³¼ ìš”ì•½: ${summaryText}`;

    // Meaning
    const meaningText = `ëŒ€ì¶œ ì›ê¸ˆ ${loanMan.toLocaleString()}ë§Œì›ì„ ì—° ${rate}% ê¸ˆë¦¬ë¡œ ${years}ë…„ê°„ ìƒí™˜í•  ë•Œ, ` +
      `ì›ë¦¬ê¸ˆê· ë“± ë°©ì‹ì€ ë§¤ì›” ${Math.round(eqMonthly).toLocaleString()}ì›ì„ ì¼ì •í•˜ê²Œ ë‚©ë¶€í•˜ë©° ì´ ì´ì ${Math.round(eqInterest/10000).toLocaleString()}ë§Œì›ì´ ë°œìƒí•©ë‹ˆë‹¤. ` +
      `ì›ê¸ˆê· ë“± ë°©ì‹ì€ ì´ˆê¸° ${Math.round(prFirst).toLocaleString()}ì›ì—ì„œ ì‹œì‘í•´ ì ì°¨ ì¤„ì–´ë“¤ë©° ì´ ì´ì ${Math.round(prInterest/10000).toLocaleString()}ë§Œì›ì´ ë°œìƒí•©ë‹ˆë‹¤. ` +
      `ë§Œê¸°ì¼ì‹œ ìƒí™˜ì€ ì´ìë§Œ ë‚©ë¶€í•˜ë‹¤ ë§Œê¸°ì— ì›ê¸ˆ ì „ì•¡ì„ ê°šëŠ” ë°©ì‹ìœ¼ë¡œ, ì´ ì´ìê°€ ${Math.round(buInterest/10000).toLocaleString()}ë§Œì›ìœ¼ë¡œ ê°€ì¥ ë§ìŠµë‹ˆë‹¤. ` +
      `ì›ê¸ˆê· ë“±ì„ ì„ íƒí•˜ë©´ ì›ë¦¬ê¸ˆê· ë“± ëŒ€ë¹„ ${Math.round(saving/10000).toLocaleString()}ë§Œì›ì˜ ì´ìë¥¼ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
    document.getElementById('seo-meaning')!.textContent = meaningText;

    // Suitable
    const suitableText = `<strong>ì›ë¦¬ê¸ˆê· ë“±</strong>: ë§¤ì›” ì¼ì •í•œ ì§€ì¶œì„ ì›í•˜ëŠ” ì§ì¥ì¸, ê°€ê³„ë¶€ ê´€ë¦¬ê°€ ì¤‘ìš”í•œ ê°€ì •, ì´ˆê¸° ìƒí™˜ ë¶€ë‹´ì„ ì¤„ì´ê³  ì‹¶ì€ ë¶„. ` +
      `<strong>ì›ê¸ˆê· ë“±</strong>: ì´ˆê¸° ë¶€ë‹´ì´ ê´œì°®ê³  ì¥ê¸°ì ìœ¼ë¡œ ì´ìë¥¼ ì¤„ì´ê³  ì‹¶ì€ ë¶„, í–¥í›„ ì†Œë“ ì¦ê°€ê°€ ì˜ˆìƒë˜ëŠ” ë¶„, ì¡°ê¸° ìƒí™˜ ê³„íšì´ ìˆëŠ” ë¶„. ` +
      `<strong>ë§Œê¸°ì¼ì‹œ</strong>: íˆ¬ìë‚˜ ì‚¬ì—… ìˆ˜ìµìœ¼ë¡œ ì›ê¸ˆì„ ì¼ì‹œ ìƒí™˜í•  ê³„íšì¸ ë¶„, í˜„ê¸ˆ íë¦„ì´ ë¶ˆê·œì¹™í•œ ì‚¬ì—…ì.`;
    document.getElementById('seo-suitable')!.innerHTML = suitableText;

    // Caution
    const cautionText = `ìƒí™˜ ë°©ì‹ ì„ íƒ ì‹œ ì£¼ì˜í•  ì ì´ ìˆìŠµë‹ˆë‹¤. ì²«ì§¸, ì›ê¸ˆê· ë“±ì€ ì´ˆê¸° ìƒí™˜ê¸ˆì´ ë†’ì•„ DSR(ì´ë¶€ì±„ì›ë¦¬ê¸ˆìƒí™˜ë¹„ìœ¨) ê³„ì‚° ì‹œ ë¶ˆë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ` +
      `ë‘˜ì§¸, ì¤‘ë„ìƒí™˜ ê³„íšì´ ìˆë‹¤ë©´ ì›ê¸ˆê· ë“±ì´ ìœ ë¦¬í•˜ì§€ë§Œ, ì¤‘ë„ìƒí™˜ìˆ˜ìˆ˜ë£Œë„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ` +
      `ì…‹ì§¸, ë§Œê¸°ì¼ì‹œ ìƒí™˜ì€ ë§Œê¸° ì‹œ ì›ê¸ˆ ìƒí™˜ ì¬ì›ì„ ë³„ë„ë¡œ ë§ˆë ¨í•´ì•¼ í•˜ë©°, ì´ë¥¼ ëª»í•˜ë©´ ì—°ì²´ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ` +
      `ë„·ì§¸, ë³€ë™ê¸ˆë¦¬ì˜ ê²½ìš° ê¸ˆë¦¬ ìƒìŠ¹ ì‹œ ì›ë¦¬ê¸ˆê· ë“±ì´ë¼ë„ ì›” ìƒí™˜ê¸ˆì´ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
    document.getElementById('seo-caution')!.textContent = cautionText;

    // FAQ
    const faqs = [
      {
        q: 'ì›ë¦¬ê¸ˆê· ë“±ê³¼ ì›ê¸ˆê· ë“±ì˜ ì°¨ì´ì ì€?',
        a: `ì›ë¦¬ê¸ˆê· ë“±ì€ ì›ê¸ˆ+ì´ìë¥¼ í•©ì³ ë§¤ì›” ë™ì¼í•œ ê¸ˆì•¡(${Math.round(eqMonthly).toLocaleString()}ì›)ì„ ë‚©ë¶€í•©ë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ì´ì ë¹„ì¤‘ì´ ë†’ê³  í›„ë°˜ì—ëŠ” ì›ê¸ˆ ë¹„ì¤‘ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. ì›ê¸ˆê· ë“±ì€ ì›ê¸ˆì„ ê· ë“±í•˜ê²Œ ë‚˜ëˆ  ê°šì•„ ì´ˆê¸° ìƒí™˜ê¸ˆ(${Math.round(prFirst).toLocaleString()}ì›)ì´ ë†’ì§€ë§Œ ì ì°¨ ì¤„ì–´ë“­ë‹ˆë‹¤.`
      },
      {
        q: 'ì–´ë–¤ ìƒí™˜ ë°©ì‹ì´ ìœ ë¦¬í•œê°€ìš”?',
        a: `ì´ ì´ì ê¸°ì¤€ìœ¼ë¡œëŠ” ì›ê¸ˆê· ë“±ì´ ${Math.round(saving/10000).toLocaleString()}ë§Œì› ìœ ë¦¬í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë§¤ì›” ì¼ì •í•œ ì§€ì¶œì„ ì›í•˜ê±°ë‚˜ ì´ˆê¸° ìƒí™˜ ë¶€ë‹´ì„ ì¤„ì´ê³  ì‹¶ë‹¤ë©´ ì›ë¦¬ê¸ˆê· ë“±ì´ ì í•©í•©ë‹ˆë‹¤. ê°œì¸ì˜ í˜„ê¸ˆ íë¦„ê³¼ ì¬ì • ìƒí™©ì— ë”°ë¼ ì„ íƒí•˜ì„¸ìš”.`
      },
      {
        q: 'ê±°ì¹˜ ê¸°ê°„ì„ ë‘ë©´ ì–´ë–¤ ì˜í–¥ì´ ìˆë‚˜ìš”?',
        a: 'ê±°ì¹˜ ê¸°ê°„ ë™ì•ˆì€ ì´ìë§Œ ë‚©ë¶€í•˜ê³  ì›ê¸ˆ ìƒí™˜ì´ ìœ ì˜ˆë©ë‹ˆë‹¤. ì´ˆê¸° ë¶€ë‹´ì€ ì¤„ì§€ë§Œ ê±°ì¹˜ ê¸°ê°„ ë™ì•ˆ ì›ê¸ˆì´ ì¤„ì§€ ì•Šì•„ ì´ ì´ìê°€ ì¦ê°€í•©ë‹ˆë‹¤. ì‚¬ì—… ì´ˆê¸°ë‚˜ ì†Œë“ì´ ë¶ˆì•ˆì •í•œ ì‹œê¸°ì— í™œìš©í•˜ë˜, ê°€ëŠ¥í•˜ë©´ ì§§ê²Œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.'
      },
      {
        q: 'ì¡°ê¸° ìƒí™˜ ì‹œ ì–´ë–¤ ë°©ì‹ì´ ìœ ë¦¬í•œê°€ìš”?',
        a: 'ì¡°ê¸° ìƒí™˜ì„ ê³„íší•œë‹¤ë©´ ì›ê¸ˆê· ë“±ì´ ìœ ë¦¬í•©ë‹ˆë‹¤. ì›ê¸ˆì´ ë¹ ë¥´ê²Œ ì¤„ì–´ ë‚¨ì€ ì´ìë„ ì ì–´ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‹¨, ì¤‘ë„ìƒí™˜ìˆ˜ìˆ˜ë£Œ(ë³´í†µ ì”ì•¡ì˜ 0.5~1.5%)ë¥¼ í™•ì¸í•˜ê³ , ìˆ˜ìˆ˜ë£Œ ë©´ì œ ì‹œì (ë³´í†µ 3ë…„) ì´í›„ì— ìƒí™˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.'
      }
    ];

    const faqContainer = document.getElementById('faq-content')!;
    faqContainer.innerHTML = faqs.map(faq => `
      <details class="group">
        <summary class="flex justify-between items-center cursor-pointer list-none p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600">
          <span class="font-medium text-gray-900 dark:text-white">${faq.q}</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <p class="mt-2 px-3 text-gray-600 dark:text-gray-400 text-sm">${faq.a}</p>
      </details>
    `).join('');

    // JSON-LD
    const faqSchema = {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqs.map(faq => ({
        "@type": "Question",
        "name": faq.q,
        "acceptedAnswer": { "@type": "Answer", "text": faq.a }
      }))
    };
    let schemaScript = document.getElementById('faq-schema') as HTMLScriptElement;
    if (!schemaScript) {
      schemaScript = document.createElement('script');
      schemaScript.id = 'faq-schema';
      schemaScript.type = 'application/ld+json';
      document.head.appendChild(schemaScript);
    }
    schemaScript.textContent = JSON.stringify(faqSchema);
  }
</script>
