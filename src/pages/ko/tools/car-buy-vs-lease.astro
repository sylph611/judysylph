---
import Layout from '../../../layouts/Layout.astro';
import { getTool, generateToolBreadcrumbSchema, generateToolHowToSchema, calculatorSteps, getToolStepType } from '../../../utils/tools';

const lang = 'ko';
const tool = getTool('car-buy-vs-lease', lang);
const siteUrl = 'https://judysylph.com';
const stepType = getToolStepType('car-buy-vs-lease');
const steps = calculatorSteps[lang][stepType];

const webAppSchema = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": tool?.title,
  "description": tool?.description,
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "All",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
};

const breadcrumbSchema = tool ? generateToolBreadcrumbSchema(tool, lang, siteUrl) : null;
const howToSchema = tool ? generateToolHowToSchema(tool, lang, siteUrl, steps) : null;
const jsonLd = [webAppSchema, breadcrumbSchema, howToSchema].filter(Boolean);
---

<Layout title={`${tool?.title} | JudySylph`} description={tool?.description} jsonLd={jsonLd}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <div class="text-5xl mb-4">{tool?.emoji}</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">{tool?.title}</h1>
      <p class="text-gray-600 dark:text-gray-400">{tool?.description}</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
      <form id="calc-form" class="space-y-6">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì°¨ëŸ‰ ê°€ê²©</label>
            <input type="text" id="carPrice" placeholder="5,000" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
            <p class="text-xs text-gray-500 mt-1">ë§Œì›</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì´ìš© ê¸°ê°„</label>
            <select id="usePeriod" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option value="36">3ë…„</option>
              <option value="48" selected>4ë…„</option>
              <option value="60">5ë…„</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-3 gap-4">
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
            <h3 class="font-bold text-blue-800 dark:text-blue-200 mb-3 text-sm">ğŸš— êµ¬ë§¤ (í• ë¶€)</h3>
            <div class="space-y-3">
              <div>
                <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">ì„ ìˆ˜ê¸ˆ</label>
                <input type="text" id="buyDown" placeholder="1,000" value="1000" class="w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500">ë§Œì›</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">í• ë¶€ ê¸ˆë¦¬</label>
                <input type="number" id="buyRate" placeholder="5.9" step="0.1" value="5.9" class="w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500">ì—° %</p>
              </div>
            </div>
          </div>

          <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4">
            <h3 class="font-bold text-green-800 dark:text-green-200 mb-3 text-sm">ğŸ“‹ ë¦¬ìŠ¤</h3>
            <div class="space-y-3">
              <div>
                <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">ë³´ì¦ê¸ˆ</label>
                <input type="text" id="leaseDeposit" placeholder="500" value="500" class="w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500">ë§Œì›</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">ì›” ë¦¬ìŠ¤ë£Œ</label>
                <input type="text" id="leaseMonthly" placeholder="80" required class="w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500">ë§Œì›</p>
              </div>
            </div>
          </div>

          <div class="bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4">
            <h3 class="font-bold text-purple-800 dark:text-purple-200 mb-3 text-sm">ğŸš• ì¥ê¸°ë ŒíŠ¸</h3>
            <div class="space-y-3">
              <div>
                <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">ë³´ì¦ê¸ˆ</label>
                <input type="text" id="rentDeposit" placeholder="300" value="300" class="w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500">ë§Œì›</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">ì›” ë ŒíŠ¸ë¹„</label>
                <input type="text" id="rentMonthly" placeholder="90" required class="w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
                <p class="text-xs text-gray-500">ë§Œì›</p>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì˜ˆìƒ ì”ì¡´ê°€ì¹˜ (êµ¬ë§¤ ì‹œ ê¸°ê°„ í›„ ì¤‘ê³ ì°¨ ê°€ì¹˜)</label>
          <input type="text" id="residualValue" placeholder="2,500" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
          <p class="text-xs text-gray-500 mt-1">ë§Œì› (ë³´í†µ ì°¨ëŸ‰ê°€ì˜ 40~60%)</p>
        </div>

        <button type="submit" class="w-full px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700">ë¹„êµ ë¶„ì„í•˜ê¸°</button>
      </form>

      <div id="result-area" class="mt-8 hidden">
        <div id="result-header" class="rounded-2xl p-6 text-white text-center mb-6">
          <div id="verdict-emoji" class="text-5xl mb-2"></div>
          <div id="verdict" class="text-2xl font-bold mb-2"></div>
          <div id="verdict-desc" class="text-lg opacity-90"></div>
        </div>

        <div class="grid grid-cols-3 gap-3 mb-6">
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border-2 border-transparent" id="card-buy">
            <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-3 text-center text-sm">ğŸš— êµ¬ë§¤</h4>
            <div class="space-y-2 text-xs">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ˆê¸°ë¹„ìš©</span><span id="buy-initial" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ë¹„ìš©</span><span id="buy-monthly" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ì§€ì¶œ</span><span id="buy-total" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì”ì¡´ê°€ì¹˜</span><span id="buy-residual" class="font-medium text-green-600">-</span></div>
              <div class="flex justify-between border-t pt-2 mt-2"><span class="font-medium">ì‹¤ì§ˆë¹„ìš©</span><span id="buy-real" class="font-bold">-</span></div>
            </div>
          </div>

          <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border-2 border-transparent" id="card-lease">
            <h4 class="font-bold text-green-800 dark:text-green-200 mb-3 text-center text-sm">ğŸ“‹ ë¦¬ìŠ¤</h4>
            <div class="space-y-2 text-xs">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ˆê¸°ë¹„ìš©</span><span id="lease-initial" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ë¹„ìš©</span><span id="lease-monthly" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ì§€ì¶œ</span><span id="lease-total" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ë³´ì¦ê¸ˆë°˜í™˜</span><span id="lease-return" class="font-medium text-green-600">-</span></div>
              <div class="flex justify-between border-t pt-2 mt-2"><span class="font-medium">ì‹¤ì§ˆë¹„ìš©</span><span id="lease-real" class="font-bold">-</span></div>
            </div>
          </div>

          <div class="bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 border-2 border-transparent" id="card-rent">
            <h4 class="font-bold text-purple-800 dark:text-purple-200 mb-3 text-center text-sm">ğŸš• ì¥ê¸°ë ŒíŠ¸</h4>
            <div class="space-y-2 text-xs">
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ˆê¸°ë¹„ìš©</span><span id="rent-initial" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ë¹„ìš©</span><span id="rent-monthly" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì´ ì§€ì¶œ</span><span id="rent-total" class="font-medium">-</span></div>
              <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ë³´ì¦ê¸ˆë°˜í™˜</span><span id="rent-return" class="font-medium text-green-600">-</span></div>
              <div class="flex justify-between border-t pt-2 mt-2"><span class="font-medium">ì‹¤ì§ˆë¹„ìš©</span><span id="rent-real" class="font-bold">-</span></div>
            </div>
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-4">ğŸ“Š ì¥ë‹¨ì  ë¹„êµ</h3>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b dark:border-gray-600">
                  <th class="text-left py-2">í•­ëª©</th>
                  <th class="text-center py-2">êµ¬ë§¤</th>
                  <th class="text-center py-2">ë¦¬ìŠ¤</th>
                  <th class="text-center py-2">ì¥ê¸°ë ŒíŠ¸</th>
                </tr>
              </thead>
              <tbody class="text-gray-600 dark:text-gray-400">
                <tr class="border-b dark:border-gray-600">
                  <td class="py-2">ì†Œìœ ê¶Œ</td>
                  <td class="text-center">âœ… ë‚´ ê²ƒ</td>
                  <td class="text-center">âŒ ë¦¬ìŠ¤ì‚¬</td>
                  <td class="text-center">âŒ ë ŒíŠ¸ì‚¬</td>
                </tr>
                <tr class="border-b dark:border-gray-600">
                  <td class="py-2">ë³´í—˜/ì„¸ê¸ˆ</td>
                  <td class="text-center">âŒ ë³¸ì¸ë¶€ë‹´</td>
                  <td class="text-center">âŒ ë³¸ì¸ë¶€ë‹´</td>
                  <td class="text-center">âœ… í¬í•¨</td>
                </tr>
                <tr class="border-b dark:border-gray-600">
                  <td class="py-2">ì •ë¹„/ê´€ë¦¬</td>
                  <td class="text-center">âŒ ë³¸ì¸</td>
                  <td class="text-center">âš ï¸ ì¼ë¶€í¬í•¨</td>
                  <td class="text-center">âœ… ì „ì²´í¬í•¨</td>
                </tr>
                <tr class="border-b dark:border-gray-600">
                  <td class="py-2">ì¤‘ë„í•´ì§€</td>
                  <td class="text-center">âœ… ììœ </td>
                  <td class="text-center">âŒ ìœ„ì•½ê¸ˆ</td>
                  <td class="text-center">âŒ ìœ„ì•½ê¸ˆ</td>
                </tr>
                <tr>
                  <td class="py-2">ë¹„ìš©ì²˜ë¦¬</td>
                  <td class="text-center">âš ï¸ ê°ê°€ìƒê°</td>
                  <td class="text-center">âœ… ì „ì•¡ê²½ë¹„</td>
                  <td class="text-center">âœ… ì „ì•¡ê²½ë¹„</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SEO Content -->
        <div id="seo-content" class="mt-8 space-y-6">
          <h2 id="seo-summary" class="text-2xl font-bold text-gray-900 dark:text-white"></h2>
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ“Œ ì´ ê²°ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ</h3>
            <p id="seo-meaning" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <!-- AD_SLOT: middle-content -->
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ‘¤ ì´ëŸ° ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤</h3>
            <p id="seo-suitable" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì </h3>
            <p id="seo-caution" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          <!-- AD_SLOT: before-faq -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
            <div id="faq-content" class="space-y-4"></div>
          </div>
          <div class="bg-primary-50 dark:bg-primary-900/20 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-3">ğŸ”— ê´€ë ¨ ê³„ì‚°ê¸°</h3>
            <div class="flex flex-wrap gap-2">
              <a href="/ko/tools/car-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸš— ë‚´ ì—°ë´‰ìœ¼ë¡œ ì‚´ ìˆ˜ ìˆëŠ” ì°¨</a>
              <a href="/ko/tools/loan-comparison" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ’³ ì‹ ìš©ëŒ€ì¶œ vs ì¹´ë“œë¡ </a>
              <a href="/ko/tools/salary-percentile" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ“Š ë‚´ ì—°ë´‰ ìˆœìœ„</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-8 text-center"><a href="/ko/tools" class="text-primary-600 dark:text-primary-400 hover:underline">â† ë„êµ¬ ëª©ë¡</a></div>
  </div>
</Layout>

<script>
  const form = document.getElementById('calc-form') as HTMLFormElement;
  const numInputs = ['carPrice', 'buyDown', 'leaseDeposit', 'leaseMonthly', 'rentDeposit', 'rentMonthly', 'residualValue'];

  numInputs.forEach(id => {
    const el = document.getElementById(id) as HTMLInputElement;
    el?.addEventListener('input', e => {
      const v = (e.target as HTMLInputElement).value.replace(/\D/g,'');
      (e.target as HTMLInputElement).value = Number(v).toLocaleString('ko-KR');
    });
  });

  function calcMonthlyPayment(principal: number, annualRate: number, months: number): number {
    const r = annualRate / 100 / 12;
    if (r === 0) return principal / months;
    return principal * r * Math.pow(1+r, months) / (Math.pow(1+r, months) - 1);
  }

  form?.addEventListener('submit', e => {
    e.preventDefault();

    const carPrice = parseInt((document.getElementById('carPrice') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const months = parseInt((document.getElementById('usePeriod') as HTMLSelectElement).value);
    const buyDown = parseInt((document.getElementById('buyDown') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const buyRate = parseFloat((document.getElementById('buyRate') as HTMLInputElement).value) || 0;
    const leaseDeposit = parseInt((document.getElementById('leaseDeposit') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const leaseMonthly = parseInt((document.getElementById('leaseMonthly') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const rentDeposit = parseInt((document.getElementById('rentDeposit') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const rentMonthly = parseInt((document.getElementById('rentMonthly') as HTMLInputElement).value.replace(/,/g,'')) || 0;
    const residualValue = parseInt((document.getElementById('residualValue') as HTMLInputElement).value.replace(/,/g,'')) || Math.round(carPrice * 0.5);

    // êµ¬ë§¤ (í• ë¶€) - ì·¨ë“ì„¸ 7% í¬í•¨
    const taxRate = 0.07;
    const buyTax = Math.round(carPrice * taxRate);
    const buyInitial = buyDown + buyTax;
    const buyLoan = carPrice - buyDown;
    const buyMonthlyPayment = calcMonthlyPayment(buyLoan * 10000, buyRate, months) / 10000;
    const buyTotalPayment = buyInitial + buyMonthlyPayment * months;
    const buyRealCost = buyTotalPayment - residualValue;

    // ë¦¬ìŠ¤
    const leaseInitial = leaseDeposit;
    const leaseTotalPayment = leaseDeposit + leaseMonthly * months;
    const leaseRealCost = leaseTotalPayment - leaseDeposit; // ë³´ì¦ê¸ˆ ë°˜í™˜

    // ì¥ê¸°ë ŒíŠ¸
    const rentInitial = rentDeposit;
    const rentTotalPayment = rentDeposit + rentMonthly * months;
    const rentRealCost = rentTotalPayment - rentDeposit; // ë³´ì¦ê¸ˆ ë°˜í™˜

    document.getElementById('result-area')?.classList.remove('hidden');

    // Find best option
    const costs = [
      { name: 'êµ¬ë§¤', cost: buyRealCost, color: 'blue', id: 'buy' },
      { name: 'ë¦¬ìŠ¤', cost: leaseRealCost, color: 'green', id: 'lease' },
      { name: 'ì¥ê¸°ë ŒíŠ¸', cost: rentRealCost, color: 'purple', id: 'rent' }
    ].sort((a, b) => a.cost - b.cost);

    const best = costs[0];
    const saving = costs[1].cost - costs[0].cost;

    // Verdict
    const header = document.getElementById('result-header')!;
    let emoji, headerColor;
    if (best.id === 'buy') { emoji = 'ğŸš—'; headerColor = 'from-blue-500 to-cyan-600'; }
    else if (best.id === 'lease') { emoji = 'ğŸ“‹'; headerColor = 'from-green-500 to-emerald-600'; }
    else { emoji = 'ğŸš•'; headerColor = 'from-purple-500 to-pink-600'; }

    header.className = `bg-gradient-to-br ${headerColor} rounded-2xl p-6 text-white text-center mb-6`;
    document.getElementById('verdict-emoji')!.textContent = emoji;
    document.getElementById('verdict')!.textContent = `${best.name}ê°€ ê°€ì¥ ìœ ë¦¬!`;
    document.getElementById('verdict-desc')!.textContent = `ì‹¤ì§ˆ ë¹„ìš© ${best.cost.toLocaleString()}ë§Œì› (${saving.toLocaleString()}ë§Œì› ì ˆê°)`;

    // Highlight best card
    ['card-buy', 'card-lease', 'card-rent'].forEach(id => {
      document.getElementById(id)!.classList.remove('border-primary-500');
    });
    document.getElementById(`card-${best.id}`)!.classList.add('border-primary-500');

    // Display values
    document.getElementById('buy-initial')!.textContent = buyInitial.toLocaleString() + 'ë§Œì›';
    document.getElementById('buy-monthly')!.textContent = Math.round(buyMonthlyPayment).toLocaleString() + 'ë§Œì›';
    document.getElementById('buy-total')!.textContent = Math.round(buyTotalPayment).toLocaleString() + 'ë§Œì›';
    document.getElementById('buy-residual')!.textContent = '+' + residualValue.toLocaleString() + 'ë§Œì›';
    document.getElementById('buy-real')!.textContent = Math.round(buyRealCost).toLocaleString() + 'ë§Œì›';

    document.getElementById('lease-initial')!.textContent = leaseInitial.toLocaleString() + 'ë§Œì›';
    document.getElementById('lease-monthly')!.textContent = leaseMonthly.toLocaleString() + 'ë§Œì›';
    document.getElementById('lease-total')!.textContent = leaseTotalPayment.toLocaleString() + 'ë§Œì›';
    document.getElementById('lease-return')!.textContent = '+' + leaseDeposit.toLocaleString() + 'ë§Œì›';
    document.getElementById('lease-real')!.textContent = leaseRealCost.toLocaleString() + 'ë§Œì›';

    document.getElementById('rent-initial')!.textContent = rentInitial.toLocaleString() + 'ë§Œì›';
    document.getElementById('rent-monthly')!.textContent = rentMonthly.toLocaleString() + 'ë§Œì›';
    document.getElementById('rent-total')!.textContent = rentTotalPayment.toLocaleString() + 'ë§Œì›';
    document.getElementById('rent-return')!.textContent = '+' + rentDeposit.toLocaleString() + 'ë§Œì›';
    document.getElementById('rent-real')!.textContent = rentRealCost.toLocaleString() + 'ë§Œì›';

    // SEO
    generateSeoContent(carPrice, months, best, buyRealCost, leaseRealCost, rentRealCost, saving);
  });

  function generateSeoContent(carPrice: number, months: number, best: any, buyCost: number, leaseCost: number, rentCost: number, saving: number) {
    const years = months / 12;

    // Summary
    const summaryText = `ì°¨ëŸ‰ê°€ ${carPrice.toLocaleString()}ë§Œì› ê¸°ì¤€ ${years}ë…„ ì´ìš© ì‹œ ${best.name}ê°€ ê°€ì¥ ìœ ë¦¬ (ì‹¤ì§ˆ ë¹„ìš© ${best.cost.toLocaleString()}ë§Œì›)`;
    document.getElementById('seo-summary')!.textContent = `ğŸ“‹ ê²°ê³¼ ìš”ì•½: ${summaryText}`;

    // Meaning
    const meaningText = `${carPrice.toLocaleString()}ë§Œì› ì°¨ëŸ‰ì„ ${years}ë…„ê°„ ì´ìš©í•  ë•Œ, ` +
      `êµ¬ë§¤(í• ë¶€)ëŠ” ì·¨ë“ì„¸ í¬í•¨ ì´ˆê¸°ë¹„ìš©ê³¼ í• ë¶€ê¸ˆì„ í•©ì‚° í›„ ì¤‘ê³ ì°¨ ê°€ì¹˜ë¥¼ ì œì™¸í•œ ì‹¤ì§ˆ ë¹„ìš©ì´ ${Math.round(buyCost).toLocaleString()}ë§Œì›ì…ë‹ˆë‹¤. ` +
      `ë¦¬ìŠ¤ëŠ” ë³´ì¦ê¸ˆ ë°˜í™˜ì„ ê³ ë ¤í•œ ì‹¤ì§ˆ ë¹„ìš©ì´ ${leaseCost.toLocaleString()}ë§Œì›, ` +
      `ì¥ê¸°ë ŒíŠ¸ëŠ” ${rentCost.toLocaleString()}ë§Œì›ì…ë‹ˆë‹¤. ` +
      `${best.name}ë¥¼ ì„ íƒí•˜ë©´ ì°¨ì„ ì±… ëŒ€ë¹„ ${saving.toLocaleString()}ë§Œì›ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ` +
      `ë‹¨, ì´ ê³„ì‚°ì—ëŠ” ë³´í—˜ë£Œ, ìë™ì°¨ì„¸, ì •ë¹„ë¹„ ë“± ìœ ì§€ë¹„ê°€ ë¯¸í¬í•¨ë˜ì–´ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì„¸ìš”.`;
    document.getElementById('seo-meaning')!.textContent = meaningText;

    // Suitable
    const suitableText = `<strong>êµ¬ë§¤</strong>: 5ë…„ ì´ìƒ ì¥ê¸° ë³´ìœ  ì˜ˆì •, ë‚´ ì°¨ì— ëŒ€í•œ ì• ì°©ì´ ìˆëŠ” ë¶„, ì¤‘ê³ ì°¨ ë§¤ë§¤ì— ìì‹  ìˆëŠ” ë¶„, ì‚¬ì—…ìê°€ ì•„ë‹Œ ê°œì¸. ` +
      `<strong>ë¦¬ìŠ¤</strong>: ì‚¬ì—…ìë¡œ ë¹„ìš©ì²˜ë¦¬ê°€ í•„ìš”í•œ ë¶„, 3~4ë…„ ì£¼ê¸°ë¡œ ì°¨ë¥¼ ë°”ê¾¸ê³  ì‹¶ì€ ë¶„, ì¤‘ê³ ì°¨ ì²˜ë¶„ì´ ê·€ì°®ì€ ë¶„. ` +
      `<strong>ì¥ê¸°ë ŒíŠ¸</strong>: ë³´í—˜/ì„¸ê¸ˆ/ì •ë¹„ ì‹ ê²½ì“°ê¸° ì‹«ì€ ë¶„, ì°¨ëŸ‰ ê´€ë¦¬ì— ì‹œê°„ ì“°ê¸° ì‹«ì€ ë¶„, ë²•ì¸/ì‚¬ì—…ìë¡œ ì „ì•¡ ê²½ë¹„ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ë¶„.`;
    document.getElementById('seo-suitable')!.innerHTML = suitableText;

    // Caution
    const cautionText = `ê° ë°©ì‹ì˜ ìˆ¨ê²¨ì§„ ë¹„ìš©ì„ ì£¼ì˜í•˜ì„¸ìš”. êµ¬ë§¤ ì‹œ ì·¨ë“ì„¸(7%), ìë™ì°¨ì„¸(ì—° 50~100ë§Œì›), ë³´í—˜ë£Œ(ì—° 80~150ë§Œì›), ì •ë¹„ë¹„ê°€ ë³„ë„ì…ë‹ˆë‹¤. ` +
      `ë¦¬ìŠ¤/ë ŒíŠ¸ëŠ” ì•½ì • ì£¼í–‰ê±°ë¦¬(ë³´í†µ ì—° 2ë§Œkm) ì´ˆê³¼ ì‹œ kmë‹¹ 100~300ì› ì¶”ê°€ ë¹„ìš©, ì¤‘ë„í•´ì§€ ì‹œ ì”ì—¬ ë¦¬ìŠ¤ë£Œì˜ 30~50% ìœ„ì•½ê¸ˆì´ ë°œìƒí•©ë‹ˆë‹¤. ` +
      `ë˜í•œ ì‚¬ê³  ì‹œ ì°¨ëŸ‰ ê°ê°€ ë¹„ìš©ì„ ë³¸ì¸ì´ ë¶€ë‹´í•  ìˆ˜ ìˆìœ¼ë‹ˆ ê³„ì•½ ì¡°ê±´ì„ ê¼¼ê¼¼íˆ í™•ì¸í•˜ì„¸ìš”.`;
    document.getElementById('seo-caution')!.textContent = cautionText;

    // FAQ
    const faqs = [
      {
        q: 'ë¦¬ìŠ¤ì™€ ì¥ê¸°ë ŒíŠ¸ì˜ ì°¨ì´ì ì€?',
        a: 'ë¦¬ìŠ¤ëŠ” ë³´í—˜, ì„¸ê¸ˆì„ ë³¸ì¸ì´ ë‚©ë¶€í•˜ê³  ë²ˆí˜¸íŒì´ ì¼ë°˜ ë²ˆí˜¸ì…ë‹ˆë‹¤. ì¥ê¸°ë ŒíŠ¸ëŠ” ëª¨ë“  ìœ ì§€ë¹„ê°€ ì›” ë‚©ì…ê¸ˆì— í¬í•¨ë˜ì–´ ìˆê³  "í•˜/í—ˆ/í˜¸" ë ŒíŠ¸ì¹´ ë²ˆí˜¸íŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¦¬ìŠ¤ê°€ ì›” ë¹„ìš©ì€ ì €ë ´í•˜ì§€ë§Œ, ê´€ë¦¬ì˜ í¸ì˜ì„±ì€ ì¥ê¸°ë ŒíŠ¸ê°€ ë†’ìŠµë‹ˆë‹¤.'
      },
      {
        q: 'ì‚¬ì—…ìì—ê²ŒëŠ” ì–´ë–¤ ë°©ì‹ì´ ìœ ë¦¬í•œê°€ìš”?',
        a: 'ì‚¬ì—…ìëŠ” ë¦¬ìŠ¤/ì¥ê¸°ë ŒíŠ¸ê°€ ìœ ë¦¬í•©ë‹ˆë‹¤. ì›” ë‚©ì…ê¸ˆ ì „ì•¡ì„ ê²½ë¹„(ì†ê¸ˆ)ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì„¸ê¸ˆì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬ë§¤ ì‹œì—ëŠ” ê°ê°€ìƒê°ë§Œ ë¹„ìš© ì²˜ë¦¬ë˜ì–´ ì´ˆê¸°ì— ê²½ë¹„ ì¸ì •ì´ ì œí•œë©ë‹ˆë‹¤. ë‹¨, 9ì¸ìŠ¹ ì´ìƒì´ë‚˜ í™”ë¬¼ì°¨ëŠ” êµ¬ë§¤í•´ë„ ìœ ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        q: 'ë¦¬ìŠ¤ ë§Œê¸° í›„ ì°¨ëŸ‰ì„ ì¸ìˆ˜í•  ìˆ˜ ìˆë‚˜ìš”?',
        a: 'ë„¤, ëŒ€ë¶€ë¶„ì˜ ë¦¬ìŠ¤ ê³„ì•½ì€ ë§Œê¸° ì‹œ ì”ì¡´ê°€ì¹˜(ì”ê°€)ë¡œ ì°¨ëŸ‰ì„ ì¸ìˆ˜í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤. ì”ê°€ê°€ ì‹œì„¸ë³´ë‹¤ ë‚®ìœ¼ë©´ ì¸ìˆ˜ í›„ ë§¤ê°í•´ ì°¨ìµì„ ì–»ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê³„ì•½ ì‹œ ì”ê°€ ì¡°ê±´ê³¼ ì¸ìˆ˜ ì˜µì…˜ì„ í™•ì¸í•˜ì„¸ìš”.'
      },
      {
        q: 'ì¤‘ë„í•´ì§€í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
        a: 'ë¦¬ìŠ¤/ë ŒíŠ¸ ëª¨ë‘ ì¤‘ë„í•´ì§€ ì‹œ ìœ„ì•½ê¸ˆì´ ë°œìƒí•©ë‹ˆë‹¤. ë³´í†µ ë‚¨ì€ ê¸°ê°„ ë‚©ì…ê¸ˆì˜ 30~50% ìˆ˜ì¤€ì…ë‹ˆë‹¤. 1ë…„ ì´ë‚´ í•´ì§€ëŠ” ë” ë†’ì€ ìœ„ì•½ê¸ˆì´ ë¶€ê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ìš© ê¸°ê°„ì´ ë¶ˆí™•ì‹¤í•˜ë‹¤ë©´ êµ¬ë§¤ë‚˜ ë‹¨ê¸°ë ŒíŠ¸ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.'
      }
    ];

    const faqContainer = document.getElementById('faq-content')!;
    faqContainer.innerHTML = faqs.map(faq => `
      <details class="group">
        <summary class="flex justify-between items-center cursor-pointer list-none p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600">
          <span class="font-medium text-gray-900 dark:text-white">${faq.q}</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <p class="mt-2 px-3 text-gray-600 dark:text-gray-400 text-sm">${faq.a}</p>
      </details>
    `).join('');

    // JSON-LD
    const faqSchema = {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqs.map(faq => ({
        "@type": "Question",
        "name": faq.q,
        "acceptedAnswer": { "@type": "Answer", "text": faq.a }
      }))
    };
    let schemaScript = document.getElementById('faq-schema') as HTMLScriptElement;
    if (!schemaScript) {
      schemaScript = document.createElement('script');
      schemaScript.id = 'faq-schema';
      schemaScript.type = 'application/ld+json';
      document.head.appendChild(schemaScript);
    }
    schemaScript.textContent = JSON.stringify(faqSchema);
  }
</script>
