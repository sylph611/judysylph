---
import Layout from '../../../layouts/Layout.astro';
import { getTool } from '../../../utils/tools';

const lang = 'ko';
const tool = getTool('car-affordability', lang);
---

<Layout title={`${tool?.title} | JudySylph`} description={tool?.description}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <div class="text-5xl mb-4">{tool?.emoji}</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">{tool?.title}</h1>
      <p class="text-gray-600 dark:text-gray-400">{tool?.description}</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
      <form id="calc-form" class="space-y-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì—°ë´‰ (ì„¸ì „)</label>
          <input type="text" id="salary" placeholder="5,000ë§Œì›" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
          <p class="text-xs text-gray-500 mt-1">ë§Œì› ë‹¨ìœ„ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">í˜„ì¬ ì €ì¶•ì•¡</label>
          <input type="text" id="savings" placeholder="3,000ë§Œì›" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ì›” ì €ì¶• ê°€ëŠ¥ ê¸ˆì•¡</label>
          <input type="text" id="monthlySave" placeholder="100ë§Œì›" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white" />
        </div>
        <button type="submit" class="w-full px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700">ë‚´ ì°¨ ì•Œì•„ë³´ê¸°</button>
      </form>

      <div id="result-area" class="mt-8 hidden">
        <div class="bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-6 text-white text-center mb-6">
          <div class="text-lg opacity-90 mb-2">ë‹¹ì‹ ì´ ì‚´ ìˆ˜ ìˆëŠ” ì°¨</div>
          <div id="car-grade" class="text-4xl font-bold mb-2">-</div>
          <div id="car-price-range" class="text-xl opacity-90">-</div>
        </div>

        <div id="car-recommendation" class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-3">ì¶”ì²œ ì°¨ëŸ‰</h3>
          <div id="car-models" class="space-y-2"></div>
        </div>

        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-5 mb-6">
          <h3 class="font-bold text-gray-900 dark:text-white mb-3">ì¬ì • ë¶„ì„</h3>
          <div class="space-y-3">
            <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì ì • ì°¨ëŸ‰ê°€</span><span id="r-proper" class="font-medium">-</span></div>
            <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ìµœëŒ€ ì°¨ëŸ‰ê°€</span><span id="r-max" class="font-medium">-</span></div>
            <div class="flex justify-between"><span class="text-gray-600 dark:text-gray-400">ì›” ìœ ì§€ë¹„ ì˜ˆìƒ</span><span id="r-monthly" class="font-medium">-</span></div>
          </div>
        </div>

        <div id="advice-box" class="rounded-xl p-5">
          <h3 class="font-bold mb-2">ğŸ’¡ ì¡°ì–¸</h3>
          <p id="advice-text" class="text-sm"></p>
        </div>

        <!-- SEO í•´ì„ ì½˜í…ì¸  -->
        <div id="seo-content" class="mt-8 space-y-6">
          <h2 id="seo-summary" class="text-2xl font-bold text-gray-900 dark:text-white"></h2>

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ“Œ ì´ ê²°ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒ</h3>
            <p id="seo-meaning" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <!-- ê´‘ê³  ì‚½ì… ì˜ì—­ -->
          <!-- AD_SLOT: middle-content -->

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">ğŸ‘¤ ì´ëŸ° ë¶„ì—ê²Œ ì í•©í•©ë‹ˆë‹¤</h3>
            <p id="seo-suitable" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <div class="prose dark:prose-invert max-w-none">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì </h3>
            <p id="seo-caution" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>

          <!-- ê´‘ê³  ì‚½ì… ì˜ì—­ -->
          <!-- AD_SLOT: before-faq -->

          <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
            <div id="faq-content" class="space-y-4"></div>
          </div>

          <div class="bg-primary-50 dark:bg-primary-900/20 rounded-xl p-5">
            <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-3">ğŸ”— ê´€ë ¨ ê³„ì‚°ê¸°</h3>
            <div class="flex flex-wrap gap-2">
              <a href="/ko/tools/apartment-affordability" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ¢ ë‚´ ì—°ë´‰ìœ¼ë¡œ ê°€ëŠ¥í•œ ì•„íŒŒíŠ¸</a>
              <a href="/ko/tools/salary-percentile" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ“Š ë‚´ ì—°ë´‰ ìˆœìœ„</a>
              <a href="/ko/tools/salary-calculator" class="px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-gray-700 transition-colors">ğŸ’° ì—°ë´‰ ì‹¤ìˆ˜ë ¹ì•¡ ê³„ì‚°ê¸°</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
      <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">ì°¨ëŸ‰ êµ¬ë§¤ ê°€ì´ë“œ</h4>
      <ul class="text-sm text-blue-700 dark:text-blue-300 space-y-1">
        <li>â€¢ <strong>ì ì • ì°¨ëŸ‰ê°€</strong>: ì—°ë´‰ì˜ 30~50% ê¶Œì¥</li>
        <li>â€¢ <strong>ìµœëŒ€ ì°¨ëŸ‰ê°€</strong>: ì—°ë´‰ì˜ 100%ë¥¼ ë„˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤</li>
        <li>â€¢ <strong>ì›” ìœ ì§€ë¹„</strong>: ë³´í—˜, ìœ ë¥˜ë¹„, ì •ë¹„ë¹„ ë“± ì›” 50~80ë§Œì› ì˜ˆìƒ</li>
      </ul>
    </div>
    <div class="mt-8 text-center"><a href="/ko/tools" class="text-primary-600 dark:text-primary-400 hover:underline">â† ë„êµ¬ ëª©ë¡</a></div>
  </div>
</Layout>

<script>
  const form = document.getElementById('calc-form') as HTMLFormElement;
  const inputs = ['salary', 'savings', 'monthlySave'].map(id => document.getElementById(id) as HTMLInputElement);

  inputs.forEach(input => {
    input?.addEventListener('input', e => {
      const v = (e.target as HTMLInputElement).value.replace(/\D/g,'');
      (e.target as HTMLInputElement).value = Number(v).toLocaleString('ko-KR');
    });
  });

  const carData = [
    { grade: 'ğŸš™ ì†Œí˜•ì°¨/ê²½ì°¨', min: 0, max: 2500, models: ['ê¸°ì•„ ëª¨ë‹', 'í˜„ëŒ€ ìºìŠ¤í¼', 'ì‰ë³´ë ˆ ìŠ¤íŒŒí¬', 'ê¸°ì•„ ë ˆì´'], color: 'from-green-500 to-teal-500' },
    { grade: 'ğŸš— ì¤€ì¤‘í˜•ì°¨', min: 2500, max: 3500, models: ['í˜„ëŒ€ ì•„ë°˜ë–¼', 'ê¸°ì•„ K3', 'ì‰ë³´ë ˆ í¬ë£¨ì¦ˆ', 'ë¥´ë…¸ SM3'], color: 'from-blue-500 to-cyan-500' },
    { grade: 'ğŸš˜ ì¤‘í˜•ì°¨', min: 3500, max: 5000, models: ['í˜„ëŒ€ ì˜ë‚˜íƒ€', 'ê¸°ì•„ K5', 'ì‰ë³´ë ˆ ë§ë¦¬ë¶€', 'VW íŒŒì‚¬íŠ¸'], color: 'from-indigo-500 to-purple-500' },
    { grade: 'ğŸš SUV/ì¤€ëŒ€í˜•', min: 5000, max: 7000, models: ['í˜„ëŒ€ íˆ¬ì‹¼', 'ê¸°ì•„ ìŠ¤í¬í‹°ì§€', 'í˜„ëŒ€ ê·¸ëœì €', 'ê¸°ì•„ K8'], color: 'from-purple-500 to-pink-500' },
    { grade: 'ğŸï¸ í”„ë¦¬ë¯¸ì—„', min: 7000, max: 10000, models: ['ì œë„¤ì‹œìŠ¤ G70', 'BMW 3ì‹œë¦¬ì¦ˆ', 'ë²¤ì¸  Cí´ë˜ìŠ¤', 'ì•„ìš°ë”” A4'], color: 'from-pink-500 to-rose-500' },
    { grade: 'ğŸ‘‘ ëŸ­ì…”ë¦¬', min: 10000, max: Infinity, models: ['ì œë„¤ì‹œìŠ¤ G80/G90', 'BMW 5/7ì‹œë¦¬ì¦ˆ', 'ë²¤ì¸  E/Sí´ë˜ìŠ¤', 'í¬ë¥´ì‰ íŒŒë‚˜ë©”ë¼'], color: 'from-amber-500 to-orange-500' }
  ];

  const advices = {
    low: { bg: 'bg-yellow-50 dark:bg-yellow-900/20', text: 'text-yellow-800 dark:text-yellow-200', msg: 'í˜„ì¬ ì €ì¶•ì•¡ê³¼ ì†Œë“ ìˆ˜ì¤€ì„ ê³ ë ¤í•  ë•Œ, ì¤‘ê³ ì°¨ë‚˜ ê²½ì°¨ë¥¼ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ë¬´ë¦¬í•œ í• ë¶€ëŠ” ìƒí™œì— ë¶€ë‹´ì´ ë  ìˆ˜ ìˆì–´ìš”.' },
    mid: { bg: 'bg-green-50 dark:bg-green-900/20', text: 'text-green-800 dark:text-green-200', msg: 'ì ì •í•œ ìˆ˜ì¤€ì˜ ì°¨ëŸ‰ì„ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ìƒí™©ì…ë‹ˆë‹¤. 36ê°œì›” ì´ë‚´ í• ë¶€ë¡œ ë¶€ë‹´ ì—†ì´ êµ¬ë§¤ ê°€ëŠ¥í•©ë‹ˆë‹¤.' },
    high: { bg: 'bg-blue-50 dark:bg-blue-900/20', text: 'text-blue-800 dark:text-blue-200', msg: 'ì—¬ìœ ë¡œìš´ ì¬ì • ìƒí™©ì…ë‹ˆë‹¤! ì›í•˜ì‹œëŠ” ì°¨ëŸ‰ì„ í˜„ê¸ˆ ë˜ëŠ” ë‹¨ê¸° í• ë¶€ë¡œ êµ¬ë§¤í•´ë„ ì¢‹ìŠµë‹ˆë‹¤.' },
    veryHigh: { bg: 'bg-purple-50 dark:bg-purple-900/20', text: 'text-purple-800 dark:text-purple-200', msg: 'í”„ë¦¬ë¯¸ì—„/ëŸ­ì…”ë¦¬ ì°¨ëŸ‰ë„ ë¬´ë¦¬ ì—†ì´ êµ¬ë§¤ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì·¨í–¥ì— ë§ëŠ” ìµœê³ ì˜ ì°¨ë¥¼ ì„ íƒí•˜ì„¸ìš”!' }
  };

  form?.addEventListener('submit', e => {
    e.preventDefault();
    const salary = parseInt(inputs[0].value.replace(/,/g,'')) || 0;
    const savings = parseInt(inputs[1].value.replace(/,/g,'')) || 0;
    const monthly = parseInt(inputs[2].value.replace(/,/g,'')) || 0;

    // ì ì • ì°¨ëŸ‰ê°€: ì—°ë´‰ì˜ 50% ë˜ëŠ” ì €ì¶•ì•¡ì˜ 80% ì¤‘ ì‘ì€ ê°’
    const properPrice = Math.min(salary * 0.5, savings * 0.8 + monthly * 12);
    // ìµœëŒ€ ì°¨ëŸ‰ê°€: ì—°ë´‰ì˜ 100% ë˜ëŠ” ì €ì¶•ì•¡ + 2ë…„ ì €ì¶•
    const maxPrice = Math.min(salary, savings + monthly * 24);

    const targetPrice = (properPrice + maxPrice) / 2;
    const car = carData.find(c => targetPrice >= c.min && targetPrice < c.max) || carData[0];

    const gradient = document.querySelector('#result-area > div:first-child') as HTMLElement;
    gradient.className = `bg-gradient-to-br ${car.color} rounded-2xl p-6 text-white text-center mb-6`;

    document.getElementById('result-area')?.classList.remove('hidden');
    document.getElementById('car-grade')!.textContent = car.grade;
    document.getElementById('car-price-range')!.textContent = car.max === Infinity
      ? `${car.min.toLocaleString()}ë§Œì› ì´ìƒ`
      : `${car.min.toLocaleString()} ~ ${car.max.toLocaleString()}ë§Œì›`;

    const modelsDiv = document.getElementById('car-models')!;
    modelsDiv.innerHTML = car.models.map(m => `<div class="flex items-center gap-2 text-gray-700 dark:text-gray-300"><span class="w-2 h-2 bg-primary-500 rounded-full"></span>${m}</div>`).join('');

    document.getElementById('r-proper')!.textContent = properPrice.toLocaleString() + 'ë§Œì›';
    document.getElementById('r-max')!.textContent = maxPrice.toLocaleString() + 'ë§Œì›';

    const monthlyMaintenance = Math.round(targetPrice * 0.015);
    document.getElementById('r-monthly')!.textContent = `ì•½ ${monthlyMaintenance.toLocaleString()}ë§Œì›`;

    let advice;
    if (salary < 4000) advice = advices.low;
    else if (salary < 6000) advice = advices.mid;
    else if (salary < 10000) advice = advices.high;
    else advice = advices.veryHigh;

    const adviceBox = document.getElementById('advice-box')!;
    adviceBox.className = `rounded-xl p-5 ${advice.bg}`;
    document.getElementById('advice-text')!.className = `text-sm ${advice.text}`;
    document.getElementById('advice-text')!.textContent = advice.msg;

    // SEO ì½˜í…ì¸  ë™ì  ìƒì„±
    generateSeoContent(salary, properPrice, maxPrice, car, targetPrice);
  });

  function generateSeoContent(salary: number, properPrice: number, maxPrice: number, car: any, targetPrice: number) {
    const ratio = Math.round((targetPrice / salary) * 100);
    const isHighRatio = ratio > 70;
    const isLowRatio = ratio < 30;

    // ê²°ê³¼ ìš”ì•½
    let summaryText, statusText;
    if (salary >= 10000) {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì› ê¸°ì¤€, ${car.grade} ë“±ê¸‰ ì°¨ëŸ‰ êµ¬ë§¤ê°€ ì ì •í•©ë‹ˆë‹¤`;
      statusText = 'ì¬ì •ì ìœ¼ë¡œ ë§¤ìš° ì•ˆì •ì ì¸ ìƒíƒœ';
    } else if (salary >= 6000) {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ìœ¼ë¡œ ${car.grade} ë“±ê¸‰ ì°¨ëŸ‰ì„ ë¬´ë¦¬ ì—†ì´ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤`;
      statusText = 'ì•ˆì •ì ì¸ êµ¬ë§¤ ê°€ëŠ¥ ë²”ìœ„';
    } else if (salary >= 4000) {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì› ê¸°ì¤€, ${car.grade} ë“±ê¸‰ì´ ì ì • ì°¨ëŸ‰ì…ë‹ˆë‹¤`;
      statusText = 'í•©ë¦¬ì ì¸ ì„ íƒ ë²”ìœ„';
    } else {
      summaryText = `ì—°ë´‰ ${salary.toLocaleString()}ë§Œì› ê¸°ì¤€ìœ¼ë¡œ ${car.grade} ë“±ê¸‰ì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤`;
      statusText = 'ì‹ ì¤‘í•œ ì ‘ê·¼ì´ í•„ìš”í•œ ìƒíƒœ';
    }
    document.getElementById('seo-summary')!.textContent = `ğŸ“‹ ê²°ê³¼ ìš”ì•½: ${summaryText}`;

    // ì˜ë¯¸ ì„¤ëª…
    const meaningText = `ì´ ê²°ê³¼ëŠ” ê·€í•˜ì˜ ì—°ë´‰ ${salary.toLocaleString()}ë§Œì›ê³¼ ì €ì¶• ìƒí™©ì„ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•œ ê²ƒì…ë‹ˆë‹¤. ` +
      `ì ì • ì°¨ëŸ‰ê°€ ${properPrice.toLocaleString()}ë§Œì›ì€ ì—°ë´‰ì˜ ì•½ ${Math.round(properPrice/salary*100)}%ì— í•´ë‹¹í•˜ë©°, ` +
      `ì´ëŠ” ${isHighRatio ? 'ë‹¤ì†Œ ë†’ì€ í¸ì´ì§€ë§Œ ê´€ë¦¬ ê°€ëŠ¥í•œ' : isLowRatio ? 'ë§¤ìš° ë³´ìˆ˜ì ì´ê³  ì•ˆì „í•œ' : 'ì¼ë°˜ì ìœ¼ë¡œ ê¶Œì¥ë˜ëŠ”'} ìˆ˜ì¤€ì…ë‹ˆë‹¤. ` +
      `ì°¨ëŸ‰ êµ¬ë§¤ ì‹œ ${car.min.toLocaleString()}~${car.max === Infinity ? 'ê·¸ ì´ìƒ' : car.max.toLocaleString() + 'ë§Œì›'} ê°€ê²©ëŒ€ì˜ ` +
      `${car.models.slice(0, 2).join(', ')} ë“±ì˜ ëª¨ë¸ì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ` +
      `ì›” ìœ ì§€ë¹„(ë³´í—˜, ìœ ë¥˜ë¹„, ì •ë¹„ë¹„)ëŠ” ì•½ ${Math.round(targetPrice * 0.015).toLocaleString()}ë§Œì›ìœ¼ë¡œ ì˜ˆìƒë˜ë©°, ` +
      `ì´ëŠ” ì›” ì†Œë“ì˜ ì•½ ${Math.round(targetPrice * 0.015 / (salary / 12) * 100)}%ì— í•´ë‹¹í•©ë‹ˆë‹¤.`;
    document.getElementById('seo-meaning')!.textContent = meaningText;

    // ì í•©í•œ ëŒ€ìƒ
    let suitableText;
    if (salary >= 8000) {
      suitableText = `ê³ ì†Œë“ ì§ì¥ì¸ì´ë‚˜ ì „ë¬¸ì§ ì¢…ì‚¬ì, ì•ˆì •ì ì¸ ë¶€ì—… ìˆ˜ì…ì´ ìˆëŠ” ë¶„, ` +
        `í”„ë¦¬ë¯¸ì—„ ë¸Œëœë“œì˜ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•˜ëŠ” ë¶„, ì¥ê±°ë¦¬ ì¶œí‡´ê·¼ìœ¼ë¡œ í¸ì•ˆí•œ ì£¼í–‰ì´ í•„ìš”í•œ ë¶„, ` +
        `ê°€ì¡± êµ¬ì„±ì›ì´ ë§ì•„ ë„“ì€ ì‹¤ë‚´ ê³µê°„ì´ í•„ìš”í•œ ë¶„ì—ê²Œ ì´ ë“±ê¸‰ì˜ ì°¨ëŸ‰ì´ ì í•©í•©ë‹ˆë‹¤.`;
    } else if (salary >= 5000) {
      suitableText = `ì•ˆì •ì ì¸ ì§ì¥ì— ë‹¤ë‹ˆëŠ” 30~40ëŒ€ ì§ì¥ì¸, ë§ë²Œì´ ë¶€ë¶€ë¡œ ê°€ê³„ ì—¬ìœ ê°€ ìˆëŠ” ë¶„, ` +
        `ì‹¤ìš©ì„±ê³¼ í’ˆì§ˆì„ ëª¨ë‘ ì¤‘ì‹œí•˜ëŠ” ë¶„, ì£¼ë§ë§ˆë‹¤ ê°€ì¡± ë‚˜ë“¤ì´ë¥¼ ì¦ê¸°ëŠ” ë¶„, ` +
        `ì¤‘ê³ ì°¨ë³´ë‹¤ ì‹ ì°¨ì˜ ì•ˆì •ì„±ì„ ì„ í˜¸í•˜ëŠ” ë¶„ì—ê²Œ ì í•©í•œ ì„ íƒì…ë‹ˆë‹¤.`;
    } else {
      suitableText = `ì‚¬íšŒì´ˆë…„ìƒì´ë‚˜ ëŒ€í•™ ì¡¸ì—… í›„ ì²« ì°¨ë¥¼ êµ¬ë§¤í•˜ëŠ” ë¶„, ì €ì¶•ì„ ìš°ì„ ì‹œí•˜ê³  ì°¨ëŸ‰ì€ ì´ë™ ìˆ˜ë‹¨ìœ¼ë¡œë§Œ ìƒê°í•˜ëŠ” ë¶„, ` +
        `ìœ ì§€ë¹„ ë¶€ë‹´ì„ ìµœì†Œí™”í•˜ê³  ì‹¶ì€ ë¶„, ë„ì‹¬ ë‚´ ì§§ì€ ê±°ë¦¬ ì£¼í–‰ì´ ëŒ€ë¶€ë¶„ì¸ ë¶„, ` +
        `ì‹¤ìš©ì ì¸ ì†Œë¹„ë¥¼ ì¶”êµ¬í•˜ëŠ” í•©ë¦¬ì ì¸ ë¶„ì—ê²Œ ì´ ë“±ê¸‰ì´ ê°€ì¥ ì í•©í•©ë‹ˆë‹¤.`;
    }
    document.getElementById('seo-suitable')!.textContent = suitableText;

    // ì£¼ì˜ì‚¬í•­
    let cautionText = `ì°¨ëŸ‰ êµ¬ë§¤ ì‹œ ëª‡ ê°€ì§€ ì£¼ì˜í•  ì ì´ ìˆìŠµë‹ˆë‹¤. ì²«ì§¸, ì°¨ëŸ‰ ê°€ê²© ì™¸ì—ë„ ì·¨ë“ì„¸(ì•½ 7%), ë³´í—˜ë£Œ, ë“±ë¡ë¹„ ë“± ` +
      `ë¶€ëŒ€ë¹„ìš©ì´ ì°¨ëŸ‰ê°€ì˜ 10~15% ì¶”ê°€ë¡œ ë°œìƒí•©ë‹ˆë‹¤. ë‘˜ì§¸, í• ë¶€ êµ¬ë§¤ ì‹œ ì´ììœ¨ì— ë”°ë¼ ì´ ì§€ë¶ˆì•¡ì´ í¬ê²Œ ë‹¬ë¼ì§€ë¯€ë¡œ ` +
      `ê¸ˆë¦¬ ë¹„êµê°€ í•„ìˆ˜ì…ë‹ˆë‹¤. ì…‹ì§¸, ì—°ë¹„, ë³´í—˜ë£Œ, ì •ë¹„ë¹„ ë“± ì›” ìœ ì§€ë¹„ê°€ ì°¨ëŸ‰ ë“±ê¸‰ì— ë”°ë¼ í¬ê²Œ ì°¨ì´ë‚˜ë¯€ë¡œ `;
    if (isHighRatio) {
      cautionText += `íŠ¹íˆ ê·€í•˜ì˜ ê²½ìš° ì°¨ëŸ‰ê°€ê°€ ì—°ë´‰ ëŒ€ë¹„ ë‹¤ì†Œ ë†’ì€ í¸ì´ë¯€ë¡œ ` +
        `48ê°œì›” ì´ìƒ ì¥ê¸° í• ë¶€ëŠ” í”¼í•˜ê³ , ë¬´ë¦¬í•œ ì˜µì…˜ ì¶”ê°€ë³´ë‹¤ëŠ” ê¸°ë³¸ ì‚¬ì–‘ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ` +
        `ë¹„ìƒê¸ˆì„ ì¶©ë¶„íˆ í™•ë³´í•œ í›„ êµ¬ë§¤ë¥¼ ì§„í–‰í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.`;
    } else {
      cautionText += `ì¥ê¸°ì ì¸ ìœ ì§€ë¹„ìš©ê¹Œì§€ ê³ ë ¤í•˜ì—¬ ê²°ì •í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ` +
        `ë˜í•œ ì¤‘ê³ ì°¨ì˜ ê²½ìš° ê°ê°€ìƒê°ì´ ì´ë¯¸ ì§„í–‰ë˜ì–´ ê°™ì€ ì˜ˆì‚°ìœ¼ë¡œ ë” ë†’ì€ ë“±ê¸‰ì˜ ì°¨ëŸ‰ì„ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì„¸ìš”.`;
    }
    document.getElementById('seo-caution')!.textContent = cautionText;

    // FAQ ìƒì„±
    const faqs = [
      {
        q: 'ì´ ê³„ì‚° ê²°ê³¼ëŠ” ë²•ì  íš¨ë ¥ì´ ìˆë‚˜ìš”?',
        a: 'ì•„ë‹ˆìš”, ì´ ê³„ì‚°ê¸°ëŠ” ì¼ë°˜ì ì¸ ì¬ì • ê°€ì´ë“œë¼ì¸ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì°¸ê³ ìš© ë„êµ¬ì…ë‹ˆë‹¤. ì‹¤ì œ ëŒ€ì¶œ í•œë„ë‚˜ êµ¬ë§¤ ê°€ëŠ¥ ê¸ˆì•¡ì€ ê°œì¸ì˜ ì‹ ìš©ë“±ê¸‰, ê¸°ì¡´ ë¶€ì±„, ê¸ˆìœµê¸°ê´€ ì •ì±… ë“±ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        q: 'ì ì • ì°¨ëŸ‰ê°€ì™€ ìµœëŒ€ ì°¨ëŸ‰ê°€ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
        a: `ì ì • ì°¨ëŸ‰ê°€(${properPrice.toLocaleString()}ë§Œì›)ëŠ” ì—°ë´‰ì˜ 30~50% ìˆ˜ì¤€ìœ¼ë¡œ ì¬ì • ê±´ì „ì„±ì„ ìœ ì§€í•˜ë©° êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ê¸ˆì•¡ì…ë‹ˆë‹¤. ìµœëŒ€ ì°¨ëŸ‰ê°€(${maxPrice.toLocaleString()}ë§Œì›)ëŠ” ë¬´ë¦¬í•˜ë©´ êµ¬ë§¤ ê°€ëŠ¥í•œ ìƒí•œì„ ìœ¼ë¡œ, ì´ ê¸ˆì•¡ìœ¼ë¡œ êµ¬ë§¤ ì‹œ ë‹¤ë¥¸ ì§€ì¶œì— ì œì•½ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
      },
      {
        q: 'ì‹¤ì œ ì°¨ëŸ‰ ê°€ê²©ê³¼ ë‹¤ë¥¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
        a: 'ë³¸ ê³„ì‚°ê¸°ëŠ” 2026ë…„ êµ­ë‚´ ì‹ ì°¨ ê¸°ì¤€ í‰ê·  ê°€ê²©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì‹¤ì œ êµ¬ë§¤ê°€ëŠ” ì˜µì…˜, í”„ë¡œëª¨ì…˜, ë”œëŸ¬ í˜‘ìƒ, ì§€ì—­ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ì¤‘ê³ ì°¨ëŠ” ì—°ì‹ê³¼ ì£¼í–‰ê±°ë¦¬ì— ë”°ë¼ 30~60% ì €ë ´í•˜ê²Œ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        q: 'ì›” ìœ ì§€ë¹„ ê³„ì‚°ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
        a: 'ì›” ìœ ì§€ë¹„ëŠ” ì°¨ëŸ‰ê°€ì˜ ì•½ 1.5%ë¥¼ ì—°ê°„ ìœ ì§€ë¹„ë¡œ ê°€ì •í•˜ê³  12ê°œì›”ë¡œ ë‚˜ëˆˆ ê°’ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” ìë™ì°¨ë³´í—˜, ìœ ë¥˜ë¹„, ì •ê¸° ì •ë¹„ë¹„, ì£¼ì°¨ë¹„ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. ì‹¤ì œ ìœ ì§€ë¹„ëŠ” ì£¼í–‰ê±°ë¦¬, ìš´ì „ ìŠµê´€, ê±°ì£¼ ì§€ì—­ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.'
      }
    ];

    const faqContainer = document.getElementById('faq-content')!;
    faqContainer.innerHTML = faqs.map(faq => `
      <details class="group">
        <summary class="flex justify-between items-center cursor-pointer list-none p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600">
          <span class="font-medium text-gray-900 dark:text-white">${faq.q}</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <p class="mt-2 px-3 text-gray-600 dark:text-gray-400 text-sm">${faq.a}</p>
      </details>
    `).join('');

    // JSON-LD FAQ Schema
    const faqSchema = {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqs.map(faq => ({
        "@type": "Question",
        "name": faq.q,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": faq.a
        }
      }))
    };

    let schemaScript = document.getElementById('faq-schema');
    if (!schemaScript) {
      schemaScript = document.createElement('script');
      schemaScript.id = 'faq-schema';
      schemaScript.type = 'application/ld+json';
      document.head.appendChild(schemaScript);
    }
    schemaScript.textContent = JSON.stringify(faqSchema);
  }
</script>
