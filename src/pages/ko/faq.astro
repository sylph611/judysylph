---
import Layout from '../../layouts/Layout.astro';

const lang = 'ko';
const pageTitle = 'FAQ | JudySylph';
const pageDescription = '자주 묻는 질문과 답변을 확인하세요.';

const faqs = [
  {
    question: '테스트 결과는 정확한가요?',
    answer: '저희 테스트는 재미와 자기 성찰을 위한 목적으로 만들어졌습니다. 과학적으로 검증된 심리 검사가 아니므로, 결과를 가볍게 참고하시고 재미로 즐겨주세요. 전문적인 심리 상담이 필요하시면 전문가와 상담하시기 바랍니다.'
  },
  {
    question: '개인정보는 어떻게 처리되나요?',
    answer: '테스트 응답 및 결과는 서버에 저장되지 않습니다. 모든 데이터는 브라우저의 로컬 스토리지에만 저장되며, 이는 사용자의 기기에서만 접근 가능합니다. 원하시면 언제든지 브라우저 설정에서 삭제할 수 있습니다.'
  },
  {
    question: '결과를 저장할 수 있나요?',
    answer: '네! 테스트를 완료하면 결과가 자동으로 "내 기록" 페이지에 저장됩니다. 헤더의 📚 아이콘을 클릭하면 지금까지의 테스트 결과를 확인할 수 있습니다.'
  },
  {
    question: '친구와 결과를 비교할 수 있나요?',
    answer: '네! 결과 페이지에서 "친구와 비교하기" 버튼을 누르면 비교 링크를 생성할 수 있습니다. 친구가 같은 테스트를 완료한 후, 두 결과를 나란히 비교해볼 수 있습니다.'
  },
  {
    question: '테스트는 무료인가요?',
    answer: '네, 모든 테스트와 도구는 완전히 무료입니다. 저희 사이트는 광고로 운영됩니다.'
  },
  {
    question: '새로운 테스트는 언제 추가되나요?',
    answer: '정기적으로 새로운 테스트를 추가하고 있습니다. 알림을 활성화하시면 새 테스트가 추가될 때 알려드립니다.'
  },
  {
    question: '영어로도 이용 가능한가요?',
    answer: '네! 페이지 상단의 언어 전환 버튼을 클릭하면 영어 버전으로 전환됩니다. 모든 테스트와 도구가 영어로도 제공됩니다.'
  },
  {
    question: '오류를 발견했어요. 어떻게 신고하나요?',
    answer: '문의하기 페이지를 통해 오류 내용을 알려주시면 빠르게 수정하겠습니다. 사용자 피드백은 저희 서비스 개선에 큰 도움이 됩니다.'
  }
];
---

<Layout title={pageTitle} description={pageDescription}>
  <div class="max-w-3xl mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-12">
      <div class="text-5xl mb-4">❓</div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">자주 묻는 질문</h1>
      <p class="text-gray-600 dark:text-gray-400">궁금한 점을 확인해보세요</p>
    </div>

    <!-- FAQ List -->
    <div class="space-y-4">
      {faqs.map((faq, index) => (
        <div class="faq-item bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
          <button
            type="button"
            class="faq-toggle w-full px-6 py-4 text-left flex items-center justify-between gap-4"
            data-index={index}
          >
            <span class="font-medium text-gray-900 dark:text-white">{faq.question}</span>
            <svg class="faq-icon w-5 h-5 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer hidden px-6 pb-4">
            <p class="text-gray-600 dark:text-gray-400 leading-relaxed">{faq.answer}</p>
          </div>
        </div>
      ))}
    </div>

    <!-- Contact CTA -->
    <div class="mt-12 p-6 bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-2xl text-center">
      <p class="text-gray-700 dark:text-gray-300 mb-4">원하는 답변을 찾지 못하셨나요?</p>
      <a
        href="/ko/contact"
        class="inline-block px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors"
      >
        문의하기
      </a>
    </div>

    <!-- Back Link -->
    <div class="mt-8 text-center">
      <a href="/ko" class="text-primary-600 dark:text-primary-400 hover:underline">
        ← 홈으로 돌아가기
      </a>
    </div>
  </div>
</Layout>

<script>
  document.querySelectorAll('.faq-toggle').forEach(toggle => {
    toggle.addEventListener('click', () => {
      const item = toggle.closest('.faq-item');
      const answer = item?.querySelector('.faq-answer');
      const icon = item?.querySelector('.faq-icon');

      // Close all others
      document.querySelectorAll('.faq-item').forEach(other => {
        if (other !== item) {
          other.querySelector('.faq-answer')?.classList.add('hidden');
          other.querySelector('.faq-icon')?.classList.remove('rotate-180');
        }
      });

      // Toggle current
      answer?.classList.toggle('hidden');
      icon?.classList.toggle('rotate-180');
    });
  });
</script>
